{"version":3,"file":"htmx.min.js","sources":["../src/htmx.js"],"sourcesContent":["\n// Public API\n//** @type {import(\"./htmx\").HtmxApi} */\n// TODO: list all methods in public API\nvar htmx = {\n    onLoad: onLoadHelper,\n    process: processNode,\n    on: addEventListenerImpl,\n    off: removeEventListenerImpl,\n    trigger : triggerEvent,\n    ajax : ajaxHelper,\n    find : find,\n    findAll : findAll,\n    closest : closest,\n    values : function(elt, type){\n        var inputValues = getInputValues(elt, type || \"post\");\n        return inputValues.values;\n    },\n    remove : removeElement,\n    addClass : addClassToElement,\n    removeClass : removeClassFromElement,\n    toggleClass : toggleClassOnElement,\n    takeClass : takeClassForElement,\n    defineExtension : defineExtension,\n    removeExtension : removeExtension,\n    logAll : logAll,\n    logger : null,\n    config : {\n        historyEnabled:true,\n        historyCacheSize:10,\n        refreshOnHistoryMiss:false,\n        defaultSwapStyle:'innerHTML',\n        defaultSwapDelay:0,\n        defaultSettleDelay:20,\n        includeIndicatorStyles:true,\n        indicatorClass:'htmx-indicator',\n        requestClass:'htmx-request',\n        addedClass:'htmx-added',\n        settlingClass:'htmx-settling',\n        swappingClass:'htmx-swapping',\n        allowEval:true,\n        inlineScriptNonce:'',\n        attributesToSettle:[\"class\", \"style\", \"width\", \"height\"],\n        withCredentials:false,\n        timeout:0,\n        wsReconnectDelay: 'full-jitter',\n        wsBinaryType: 'blob',\n        disableSelector: \"[hx-disable], [data-hx-disable]\",\n        useTemplateFragments: false,\n        scrollBehavior: 'smooth',\n        defaultFocusScroll: false,\n        getCacheBusterParam: false,\n    },\n    parseInterval:parseInterval,\n    _:internalEval,\n    createEventSource: function(url){\n        return new EventSource(url, {withCredentials:true})\n    },\n    createWebSocket: function(url){\n        var sock = new WebSocket(url, []);\n        sock.binaryType = htmx.config.wsBinaryType;\n        return sock;\n    },\n    version: \"1.8.5\"\n};\n\n/** @type {import(\"./htmx\").HtmxInternalApi} */\nvar internalAPI = {\n    addTriggerHandler: addTriggerHandler,\n    bodyContains: bodyContains,\n    canAccessLocalStorage: canAccessLocalStorage,\n    filterValues: filterValues,\n    hasAttribute: hasAttribute,\n    getAttributeValue: getAttributeValue,\n    getClosestMatch: getClosestMatch,\n    getExpressionVars: getExpressionVars,\n    getHeaders: getHeaders,\n    getInputValues: getInputValues,\n    getInternalData: getInternalData,\n    getSwapSpecification: getSwapSpecification,\n    getTriggerSpecs: getTriggerSpecs,\n    getTarget: getTarget,\n    makeFragment: makeFragment,\n    mergeObjects: mergeObjects,\n    makeSettleInfo: makeSettleInfo,\n    oobSwap: oobSwap,\n    selectAndSwap: selectAndSwap,\n    settleImmediately: settleImmediately,\n    shouldCancel: shouldCancel,\n    triggerEvent: triggerEvent,\n    triggerErrorEvent: triggerErrorEvent,\n    withExtensions: withExtensions,\n}\n\nvar VERBS = ['get', 'post', 'put', 'delete', 'patch'];\nvar VERB_SELECTOR = VERBS.map(function(verb){\n    return \"[hx-\" + verb + \"], [data-hx-\" + verb + \"]\"\n}).join(\", \");\n\n//====================================================================\n// Utilities\n//====================================================================\n\nfunction parseInterval(str) {\n    if (str == undefined)  {\n        return undefined\n    }\n    if (str.slice(-2) == \"ms\") {\n        return parseFloat(str.slice(0,-2)) || undefined\n    }\n    if (str.slice(-1) == \"s\") {\n        return (parseFloat(str.slice(0,-1)) * 1000) || undefined\n    }\n    if (str.slice(-1) == \"m\") {\n        return (parseFloat(str.slice(0,-1)) * 1000 * 60) || undefined\n    }\n    return parseFloat(str) || undefined\n}\n\n/**\n * @param {HTMLElement} elt\n * @param {string} name\n * @returns {(string | null)}\n */\nfunction getRawAttribute(elt, name) {\n    return elt.getAttribute && elt.getAttribute(name);\n}\n\n// resolve with both hx and data-hx prefixes\nfunction hasAttribute(elt, qualifiedName) {\n    return elt.hasAttribute && (elt.hasAttribute(qualifiedName) ||\n        elt.hasAttribute(\"data-\" + qualifiedName));\n}\n\n/**\n *\n * @param {HTMLElement} elt\n * @param {string} qualifiedName\n * @returns {(string | null)}\n */\nfunction getAttributeValue(elt, qualifiedName) {\n    return getRawAttribute(elt, qualifiedName) || getRawAttribute(elt, \"data-\" + qualifiedName);\n}\n\n/**\n * @param {HTMLElement} elt\n * @returns {HTMLElement | null}\n */\nfunction parentElt(elt) {\n    return elt.parentElement;\n}\n\n/**\n * @returns {Document}\n */\nfunction getDocument() {\n    return document;\n}\n\n/**\n * @param {HTMLElement} elt\n * @param {(e:HTMLElement) => boolean} condition\n * @returns {HTMLElement | null}\n */\nfunction getClosestMatch(elt, condition) {\n    while (elt && !condition(elt)) {\n        elt = parentElt(elt);\n    }\n\n    return elt ? elt : null;\n}\n\nfunction getAttributeValueWithDisinheritance(initialElement, ancestor, attributeName){\n    var attributeValue = getAttributeValue(ancestor, attributeName);\n    var disinherit = getAttributeValue(ancestor, \"hx-disinherit\");\n    if (initialElement !== ancestor && disinherit && (disinherit === \"*\" || disinherit.split(\" \").indexOf(attributeName) >= 0)) {\n        return \"unset\";\n    } else {\n        return attributeValue\n    }\n}\n\n/**\n * @param {HTMLElement} elt\n * @param {string} attributeName\n * @returns {string | null}\n */\nfunction getClosestAttributeValue(elt, attributeName) {\n    var closestAttr = null;\n    getClosestMatch(elt, function (e) {\n        return closestAttr = getAttributeValueWithDisinheritance(elt, e, attributeName);\n    });\n    if (closestAttr !== \"unset\") {\n        return closestAttr;\n    }\n}\n\n/**\n * @param {HTMLElement} elt\n * @param {string} selector\n * @returns {boolean}\n */\nfunction matches(elt, selector) {\n    // @ts-ignore: non-standard properties for browser compatability\n    // noinspection JSUnresolvedVariable\n    var matchesFunction = elt.matches || elt.matchesSelector || elt.msMatchesSelector || elt.mozMatchesSelector || elt.webkitMatchesSelector || elt.oMatchesSelector;\n    return matchesFunction && matchesFunction.call(elt, selector);\n}\n\n/**\n * @param {string} str\n * @returns {string}\n */\nfunction getStartTag(str) {\n    var tagMatcher = /<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i\n    var match = tagMatcher.exec( str );\n    if (match) {\n        return match[1].toLowerCase();\n    } else {\n        return \"\";\n    }\n}\n\n/**\n *\n * @param {string} resp\n * @param {number} depth\n * @returns {Element}\n */\nfunction parseHTML(resp, depth) {\n    var parser = new DOMParser();\n    var responseDoc = parser.parseFromString(resp, \"text/html\");\n\n    /** @type {Element} */\n    var responseNode = responseDoc.body;\n    while (depth > 0) {\n        depth--;\n        // @ts-ignore\n        responseNode = responseNode.firstChild;\n    }\n    if (responseNode == null) {\n        // @ts-ignore\n        responseNode = getDocument().createDocumentFragment();\n    }\n    return responseNode;\n}\n\n/**\n *\n * @param {string} resp\n * @returns {Element}\n */\nfunction makeFragment(resp) {\n    if (htmx.config.useTemplateFragments) {\n        var documentFragment = parseHTML(\"<body><template>\" + resp + \"</template></body>\", 0);\n        // @ts-ignore type mismatch between DocumentFragment and Element.\n        // TODO: Are these close enough for htmx to use interchangably?\n        return documentFragment.querySelector('template').content;\n    } else {\n        var startTag = getStartTag(resp);\n        switch (startTag) {\n            case \"thead\":\n            case \"tbody\":\n            case \"tfoot\":\n            case \"colgroup\":\n            case \"caption\":\n                return parseHTML(\"<table>\" + resp + \"</table>\", 1);\n            case \"col\":\n                return parseHTML(\"<table><colgroup>\" + resp + \"</colgroup></table>\", 2);\n            case \"tr\":\n                return parseHTML(\"<table><tbody>\" + resp + \"</tbody></table>\", 2);\n            case \"td\":\n            case \"th\":\n                return parseHTML(\"<table><tbody><tr>\" + resp + \"</tr></tbody></table>\", 3);\n            case \"script\":\n                return parseHTML(\"<div>\" + resp + \"</div>\", 1);\n            default:\n                return parseHTML(resp, 0);\n        }\n    }\n}\n\n/**\n * @param {Function} func\n */\nfunction maybeCall(func){\n    if(func) {\n        func();\n    }\n}\n\n/**\n * @param {any} o\n * @param {string} type\n * @returns\n */\nfunction isType(o, type) {\n    return Object.prototype.toString.call(o) === \"[object \" + type + \"]\";\n}\n\n/**\n * @param {*} o\n * @returns {o is Function}\n */\nfunction isFunction(o) {\n    return isType(o, \"Function\");\n}\n\n/**\n * @param {*} o\n * @returns {o is Object}\n */\nfunction isRawObject(o) {\n    return isType(o, \"Object\");\n}\n\n/**\n * getInternalData retrieves \"private\" data stored by htmx within an element\n * @param {HTMLElement} elt\n * @returns {*}\n */\nfunction getInternalData(elt) {\n    var dataProp = 'htmx-internal-data';\n    var data = elt[dataProp];\n    if (!data) {\n        data = elt[dataProp] = {};\n    }\n    return data;\n}\n\n/**\n * toArray converts an ArrayLike object into a real array.\n * @param {ArrayLike} arr\n * @returns {any[]}\n */\nfunction toArray(arr) {\n    var returnArr = [];\n    if (arr) {\n        for (var i = 0; i < arr.length; i++) {\n            returnArr.push(arr[i]);\n        }\n    }\n    return returnArr\n}\n\nfunction forEach(arr, func) {\n    if (arr) {\n        for (var i = 0; i < arr.length; i++) {\n            func(arr[i]);\n        }\n    }\n}\n\nfunction isScrolledIntoView(el) {\n    var rect = el.getBoundingClientRect();\n    var elemTop = rect.top;\n    var elemBottom = rect.bottom;\n    return elemTop < window.innerHeight && elemBottom >= 0;\n}\n\nfunction bodyContains(elt) {\n    // IE Fix\n    if (elt.getRootNode && elt.getRootNode() instanceof ShadowRoot) {\n        return getDocument().body.contains(elt.getRootNode().host);\n    } else {\n        return getDocument().body.contains(elt);\n    }\n}\n\nfunction splitOnWhitespace(trigger) {\n    return trigger.trim().split(/\\s+/);\n}\n\n/**\n * mergeObjects takes all of the keys from\n * obj2 and duplicates them into obj1\n * @param {Object} obj1\n * @param {Object} obj2\n * @returns {Object}\n */\nfunction mergeObjects(obj1, obj2) {\n    for (var key in obj2) {\n        if (obj2.hasOwnProperty(key)) {\n            obj1[key] = obj2[key];\n        }\n    }\n    return obj1;\n}\n\nfunction parseJSON(jString) {\n    try {\n        return JSON.parse(jString);\n    } catch(error) {\n        logError(error);\n        return null;\n    }\n}\n\nfunction canAccessLocalStorage() {\n    var test = 'htmx:localStorageTest';\n    try {\n        localStorage.setItem(test, test);\n        localStorage.removeItem(test);\n        return true;\n    } catch(e) {\n        return false;\n    }\n}\n\n//==========================================================================================\n// public API\n//==========================================================================================\n\nfunction internalEval(str){\n    return maybeEval(getDocument().body, function () {\n        return eval(str);\n    });\n}\n\nfunction onLoadHelper(callback) {\n    var value = htmx.on(\"htmx:load\", function(evt) {\n        callback(evt.detail.elt);\n    });\n    return value;\n}\n\nfunction logAll(){\n    htmx.logger = function(elt, event, data) {\n        if(console) {\n            console.log(event, elt, data);\n        }\n    }\n}\n\nfunction find(eltOrSelector, selector) {\n    if (selector) {\n        return eltOrSelector.querySelector(selector);\n    } else {\n        return find(getDocument(), eltOrSelector);\n    }\n}\n\nfunction findAll(eltOrSelector, selector) {\n    if (selector) {\n        return eltOrSelector.querySelectorAll(selector);\n    } else {\n        return findAll(getDocument(), eltOrSelector);\n    }\n}\n\nfunction removeElement(elt, delay) {\n    elt = resolveTarget(elt);\n    if (delay) {\n        setTimeout(function(){removeElement(elt);}, delay)\n    } else {\n        elt.parentElement.removeChild(elt);\n    }\n}\n\nfunction addClassToElement(elt, clazz, delay) {\n    elt = resolveTarget(elt);\n    if (delay) {\n        setTimeout(function(){addClassToElement(elt, clazz);}, delay)\n    } else {\n        elt.classList && elt.classList.add(clazz);\n    }\n}\n\nfunction removeClassFromElement(elt, clazz, delay) {\n    elt = resolveTarget(elt);\n    if (delay) {\n        setTimeout(function(){removeClassFromElement(elt, clazz);}, delay)\n    } else {\n        if (elt.classList) {\n            elt.classList.remove(clazz);\n            // if there are no classes left, remove the class attribute\n            if (elt.classList.length === 0) {\n                elt.removeAttribute(\"class\");\n            }\n        }\n    }\n}\n\nfunction toggleClassOnElement(elt, clazz) {\n    elt = resolveTarget(elt);\n    elt.classList.toggle(clazz);\n}\n\nfunction takeClassForElement(elt, clazz) {\n    elt = resolveTarget(elt);\n    forEach(elt.parentElement.children, function(child){\n        removeClassFromElement(child, clazz);\n    })\n    addClassToElement(elt, clazz);\n}\n\nfunction closest(elt, selector) {\n    elt = resolveTarget(elt);\n    if (elt.closest) {\n        return elt.closest(selector);\n    } else {\n        // TODO remove when IE goes away\n        do{\n            if (elt == null || matches(elt, selector)){\n                return elt;\n            }\n        }\n        while (elt = elt && parentElt(elt));\n        return null;\n    }\n}\n\nfunction querySelectorAllExt(elt, selector) {\n    if (selector.indexOf(\"closest \") === 0) {\n        return [closest(elt, selector.substr(8))];\n    } else if (selector.indexOf(\"find \") === 0) {\n        return [find(elt, selector.substr(5))];\n    } else if (selector.indexOf(\"next \") === 0) {\n        return [scanForwardQuery(elt, selector.substr(5))];\n    } else if (selector.indexOf(\"previous \") === 0) {\n        return [scanBackwardsQuery(elt, selector.substr(9))];\n    } else if (selector === 'document') {\n        return [document];\n    } else if (selector === 'window') {\n        return [window];\n    } else {\n        return getDocument().querySelectorAll(selector);\n    }\n}\n\nvar scanForwardQuery = function(start, match) {\n    var results = getDocument().querySelectorAll(match);\n    for (var i = 0; i < results.length; i++) {\n        var elt = results[i];\n        if (elt.compareDocumentPosition(start) === Node.DOCUMENT_POSITION_PRECEDING) {\n            return elt;\n        }\n    }\n}\n\nvar scanBackwardsQuery = function(start, match) {\n    var results = getDocument().querySelectorAll(match);\n    for (var i = results.length - 1; i >= 0; i--) {\n        var elt = results[i];\n        if (elt.compareDocumentPosition(start) === Node.DOCUMENT_POSITION_FOLLOWING) {\n            return elt;\n        }\n    }\n}\n\nfunction querySelectorExt(eltOrSelector, selector) {\n    if (selector) {\n        return querySelectorAllExt(eltOrSelector, selector)[0];\n    } else {\n        return querySelectorAllExt(getDocument().body, eltOrSelector)[0];\n    }\n}\n\nfunction resolveTarget(arg2) {\n    if (isType(arg2, 'String')) {\n        return find(arg2);\n    } else {\n        return arg2;\n    }\n}\n\nfunction processEventArgs(arg1, arg2, arg3) {\n    if (isFunction(arg2)) {\n        return {\n            target: getDocument().body,\n            event: arg1,\n            listener: arg2\n        }\n    } else {\n        return {\n            target: resolveTarget(arg1),\n            event: arg2,\n            listener: arg3\n        }\n    }\n\n}\n\nfunction addEventListenerImpl(arg1, arg2, arg3) {\n    ready(function(){\n        var eventArgs = processEventArgs(arg1, arg2, arg3);\n        eventArgs.target.addEventListener(eventArgs.event, eventArgs.listener);\n    })\n    var b = isFunction(arg2);\n    return b ? arg2 : arg3;\n}\n\nfunction removeEventListenerImpl(arg1, arg2, arg3) {\n    ready(function(){\n        var eventArgs = processEventArgs(arg1, arg2, arg3);\n        eventArgs.target.removeEventListener(eventArgs.event, eventArgs.listener);\n    })\n    return isFunction(arg2) ? arg2 : arg3;\n}\n\n//====================================================================\n// Node processing\n//====================================================================\n\nvar DUMMY_ELT = getDocument().createElement(\"output\"); // dummy element for bad selectors\nfunction findAttributeTargets(elt, attrName) {\n    var attrTarget = getClosestAttributeValue(elt, attrName);\n    if (attrTarget) {\n        if (attrTarget === \"this\") {\n            return [findThisElement(elt, attrName)];\n        } else {\n            var result = querySelectorAllExt(elt, attrTarget);\n            if (result.length === 0) {\n                logError('The selector \"' + attrTarget + '\" on ' + attrName + \" returned no matches!\");\n                return [DUMMY_ELT]\n            } else {\n                return result;\n            }\n        }\n    }\n}\n\nfunction findThisElement(elt, attribute){\n    return getClosestMatch(elt, function (elt) {\n        return getAttributeValue(elt, attribute) != null;\n    })\n}\n\nfunction getTarget(elt) {\n    var targetStr = getClosestAttributeValue(elt, \"hx-target\");\n    if (targetStr) {\n        if (targetStr === \"this\") {\n            return findThisElement(elt,'hx-target');\n        } else {\n            return querySelectorExt(elt, targetStr)\n        }\n    } else {\n        var data = getInternalData(elt);\n        if (data.boosted) {\n            return getDocument().body;\n        } else {\n            return elt;\n        }\n    }\n}\n\nfunction shouldSettleAttribute(name) {\n    var attributesToSettle = htmx.config.attributesToSettle;\n    for (var i = 0; i < attributesToSettle.length; i++) {\n        if (name === attributesToSettle[i]) {\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction cloneAttributes(mergeTo, mergeFrom) {\n    forEach(mergeTo.attributes, function (attr) {\n        if (!mergeFrom.hasAttribute(attr.name) && shouldSettleAttribute(attr.name)) {\n            mergeTo.removeAttribute(attr.name)\n        }\n    });\n    forEach(mergeFrom.attributes, function (attr) {\n        if (shouldSettleAttribute(attr.name)) {\n            mergeTo.setAttribute(attr.name, attr.value);\n        }\n    });\n}\n\nfunction isInlineSwap(swapStyle, target) {\n    var extensions = getExtensions(target);\n    for (var i = 0; i < extensions.length; i++) {\n        var extension = extensions[i];\n        try {\n            if (extension.isInlineSwap(swapStyle)) {\n                return true;\n            }\n        } catch(e) {\n            logError(e);\n        }\n    }\n    return swapStyle === \"outerHTML\";\n}\n\n/**\n *\n * @param {string} oobValue\n * @param {HTMLElement} oobElement\n * @param {*} settleInfo\n * @returns\n */\nfunction oobSwap(oobValue, oobElement, settleInfo) {\n    var selector = \"#\" + oobElement.id;\n    var swapStyle = \"outerHTML\";\n    if (oobValue === \"true\") {\n        // do nothing\n    } else if (oobValue.indexOf(\":\") > 0) {\n        swapStyle = oobValue.substr(0, oobValue.indexOf(\":\"));\n        selector  = oobValue.substr(oobValue.indexOf(\":\") + 1, oobValue.length);\n    } else {\n        swapStyle = oobValue;\n    }\n\n    var targets = getDocument().querySelectorAll(selector);\n    if (targets) {\n        forEach(\n            targets,\n            function (target) {\n                var fragment;\n                var oobElementClone = oobElement.cloneNode(true);\n                fragment = getDocument().createDocumentFragment();\n                fragment.appendChild(oobElementClone);\n                if (!isInlineSwap(swapStyle, target)) {\n                    fragment = oobElementClone; // if this is not an inline swap, we use the content of the node, not the node itself\n                }\n\n                var beforeSwapDetails = {shouldSwap: true, target: target, fragment:fragment };\n                if (!triggerEvent(target, 'htmx:oobBeforeSwap', beforeSwapDetails)) return;\n\n                target = beforeSwapDetails.target; // allow re-targeting\n                if (beforeSwapDetails['shouldSwap']){\n                    swap(swapStyle, target, target, fragment, settleInfo);\n                }\n                forEach(settleInfo.elts, function (elt) {\n                    triggerEvent(elt, 'htmx:oobAfterSwap', beforeSwapDetails);\n                });\n            }\n        );\n        oobElement.parentNode.removeChild(oobElement);\n    } else {\n        oobElement.parentNode.removeChild(oobElement);\n        triggerErrorEvent(getDocument().body, \"htmx:oobErrorNoTarget\", {content: oobElement});\n    }\n    return oobValue;\n}\n\nfunction handleOutOfBandSwaps(elt, fragment, settleInfo) {\n    var oobSelects = getClosestAttributeValue(elt, \"hx-select-oob\");\n    if (oobSelects) {\n        var oobSelectValues = oobSelects.split(\",\");\n        for (let i = 0; i < oobSelectValues.length; i++) {\n            var oobSelectValue = oobSelectValues[i].split(\":\", 2);\n            var id = oobSelectValue[0];\n            if (id.indexOf(\"#\") === 0) {\n                id = id.substring(1);\n            }\n            var oobValue = oobSelectValue[1] || \"true\";\n            var oobElement = fragment.querySelector(\"#\" + id);\n            if (oobElement) {\n                oobSwap(oobValue, oobElement, settleInfo);\n            }\n        }\n    }\n    forEach(findAll(fragment, '[hx-swap-oob], [data-hx-swap-oob]'), function (oobElement) {\n        var oobValue = getAttributeValue(oobElement, \"hx-swap-oob\");\n        if (oobValue != null) {\n            oobSwap(oobValue, oobElement, settleInfo);\n        }\n    });\n}\n\nfunction handlePreservedElements(fragment) {\n    forEach(findAll(fragment, '[hx-preserve], [data-hx-preserve]'), function (preservedElt) {\n        var id = getAttributeValue(preservedElt, \"id\");\n        var oldElt = getDocument().getElementById(id);\n        if (oldElt != null) {\n            preservedElt.parentNode.replaceChild(oldElt, preservedElt);\n        }\n    });\n}\n\nfunction handleAttributes(parentNode, fragment, settleInfo) {\n    forEach(fragment.querySelectorAll(\"[id]\"), function (newNode) {\n        if (newNode.id && newNode.id.length > 0) {\n            var oldNode = parentNode.querySelector(newNode.tagName + \"[id='\" + newNode.id + \"']\");\n            if (oldNode && oldNode !== parentNode) {\n                var newAttributes = newNode.cloneNode();\n                cloneAttributes(newNode, oldNode);\n                settleInfo.tasks.push(function () {\n                    cloneAttributes(newNode, newAttributes);\n                });\n            }\n        }\n    });\n}\n\nfunction makeAjaxLoadTask(child) {\n    return function () {\n        removeClassFromElement(child, htmx.config.addedClass);\n        processNode(child);\n        processScripts(child);\n        processFocus(child)\n        triggerEvent(child, 'htmx:load');\n    };\n}\n\nfunction processFocus(child) {\n    var autofocus = \"[autofocus]\";\n    var autoFocusedElt = matches(child, autofocus) ? child : child.querySelector(autofocus)\n    if (autoFocusedElt != null) {\n        autoFocusedElt.focus();\n    }\n}\n\nfunction insertNodesBefore(parentNode, insertBefore, fragment, settleInfo) {\n    handleAttributes(parentNode, fragment, settleInfo);\n    while(fragment.childNodes.length > 0){\n        var child = fragment.firstChild;\n        addClassToElement(child, htmx.config.addedClass);\n        parentNode.insertBefore(child, insertBefore);\n        if (child.nodeType !== Node.TEXT_NODE && child.nodeType !== Node.COMMENT_NODE) {\n            settleInfo.tasks.push(makeAjaxLoadTask(child));\n        }\n    }\n}\n\n// based on https://gist.github.com/hyamamoto/fd435505d29ebfa3d9716fd2be8d42f0,\n// derived from Java's string hashcode implementation\nfunction stringHash(string, hash) {\n    var char = 0;\n    while (char < string.length){\n        hash = (hash << 5) - hash + string.charCodeAt(char++) | 0; // bitwise or ensures we have a 32-bit int\n    }\n    return hash;\n}\n\nfunction attributeHash(elt) {\n    var hash = 0;\n    // IE fix\n    if (elt.attributes) {\n        for (var i = 0; i < elt.attributes.length; i++) {\n            var attribute = elt.attributes[i];\n            if(attribute.value){ // only include attributes w/ actual values (empty is same as non-existent)\n                hash = stringHash(attribute.name, hash);\n                hash = stringHash(attribute.value, hash);\n            }\n        }\n    }\n    return hash;\n}\n\nfunction deInitNode(element) {\n    var internalData = getInternalData(element);\n    if (internalData.webSocket) {\n        internalData.webSocket.close();\n    }\n    if (internalData.sseEventSource) {\n        internalData.sseEventSource.close();\n    }\n    if (internalData.listenerInfos) {\n        forEach(internalData.listenerInfos, function (info) {\n            if (info.on) {\n                info.on.removeEventListener(info.trigger, info.listener);\n            }\n        });\n    }\n}\n\nfunction cleanUpElement(element) {\n    triggerEvent(element, \"htmx:beforeCleanupElement\")\n    deInitNode(element);\n    if (element.children) { // IE\n        forEach(element.children, function(child) { cleanUpElement(child) });\n    }\n}\n\nfunction swapOuterHTML(target, fragment, settleInfo) {\n    if (target.tagName === \"BODY\") {\n        return swapInnerHTML(target, fragment, settleInfo);\n    } else {\n        // @type {HTMLElement}\n        var newElt\n        var eltBeforeNewContent = target.previousSibling;\n        insertNodesBefore(parentElt(target), target, fragment, settleInfo);\n        if (eltBeforeNewContent == null) {\n            newElt = parentElt(target).firstChild;\n        } else {\n            newElt = eltBeforeNewContent.nextSibling;\n        }\n        getInternalData(target).replacedWith = newElt; // tuck away so we can fire events on it later\n        settleInfo.elts = [] // clear existing elements\n        while(newElt && newElt !== target) {\n            if (newElt.nodeType === Node.ELEMENT_NODE) {\n                settleInfo.elts.push(newElt);\n            }\n            newElt = newElt.nextElementSibling;\n        }\n        cleanUpElement(target);\n        parentElt(target).removeChild(target);\n    }\n}\n\nfunction swapAfterBegin(target, fragment, settleInfo) {\n    return insertNodesBefore(target, target.firstChild, fragment, settleInfo);\n}\n\nfunction swapBeforeBegin(target, fragment, settleInfo) {\n    return insertNodesBefore(parentElt(target), target, fragment, settleInfo);\n}\n\nfunction swapBeforeEnd(target, fragment, settleInfo) {\n    return insertNodesBefore(target, null, fragment, settleInfo);\n}\n\nfunction swapAfterEnd(target, fragment, settleInfo) {\n    return insertNodesBefore(parentElt(target), target.nextSibling, fragment, settleInfo);\n}\nfunction swapDelete(target, fragment, settleInfo) {\n    cleanUpElement(target);\n    return parentElt(target).removeChild(target);\n}\n\nfunction swapInnerHTML(target, fragment, settleInfo) {\n    var firstChild = target.firstChild;\n    insertNodesBefore(target, firstChild, fragment, settleInfo);\n    if (firstChild) {\n        while (firstChild.nextSibling) {\n            cleanUpElement(firstChild.nextSibling)\n            target.removeChild(firstChild.nextSibling);\n        }\n        cleanUpElement(firstChild)\n        target.removeChild(firstChild);\n    }\n}\n\nfunction maybeSelectFromResponse(elt, fragment) {\n    var selector = getClosestAttributeValue(elt, \"hx-select\");\n    if (selector) {\n        var newFragment = getDocument().createDocumentFragment();\n        forEach(fragment.querySelectorAll(selector), function (node) {\n            newFragment.appendChild(node);\n        });\n        fragment = newFragment;\n    }\n    return fragment;\n}\n\nfunction swap(swapStyle, elt, target, fragment, settleInfo) {\n    switch (swapStyle) {\n        case \"none\":\n            return;\n        case \"outerHTML\":\n            swapOuterHTML(target, fragment, settleInfo);\n            return;\n        case \"afterbegin\":\n            swapAfterBegin(target, fragment, settleInfo);\n            return;\n        case \"beforebegin\":\n            swapBeforeBegin(target, fragment, settleInfo);\n            return;\n        case \"beforeend\":\n            swapBeforeEnd(target, fragment, settleInfo);\n            return;\n        case \"afterend\":\n            swapAfterEnd(target, fragment, settleInfo);\n            return;\n        case \"delete\":\n            swapDelete(target, fragment, settleInfo);\n            return;\n        default:\n            var extensions = getExtensions(elt);\n            for (var i = 0; i < extensions.length; i++) {\n                var ext = extensions[i];\n                try {\n                    var newElements = ext.handleSwap(swapStyle, target, fragment, settleInfo);\n                    if (newElements) {\n                        if (typeof newElements.length !== 'undefined') {\n                            // if handleSwap returns an array (like) of elements, we handle them\n                            for (var j = 0; j < newElements.length; j++) {\n                                var child = newElements[j];\n                                if (child.nodeType !== Node.TEXT_NODE && child.nodeType !== Node.COMMENT_NODE) {\n                                    settleInfo.tasks.push(makeAjaxLoadTask(child));\n                                }\n                            }\n                        }\n                        return;\n                    }\n                } catch (e) {\n                    logError(e);\n                }\n            }\n            if (swapStyle === \"innerHTML\") {\n                swapInnerHTML(target, fragment, settleInfo);\n            } else {\n                swap(htmx.config.defaultSwapStyle, elt, target, fragment, settleInfo);\n            }\n    }\n}\n\nfunction findTitle(content) {\n    if (content.indexOf('<title') > -1) {\n        var contentWithSvgsRemoved = content.replace(/<svg(\\s[^>]*>|>)([\\s\\S]*?)<\\/svg>/gim, '');\n        var result = contentWithSvgsRemoved.match(/<title(\\s[^>]*>|>)([\\s\\S]*?)<\\/title>/im);\n\n        if (result) {\n            return result[2];\n        }\n    }\n}\n\nfunction selectAndSwap(swapStyle, target, elt, responseText, settleInfo) {\n    settleInfo.title = findTitle(responseText);\n    var fragment = makeFragment(responseText);\n    if (fragment) {\n        handleOutOfBandSwaps(elt, fragment, settleInfo);\n        fragment = maybeSelectFromResponse(elt, fragment);\n        handlePreservedElements(fragment);\n        return swap(swapStyle, elt, target, fragment, settleInfo);\n    }\n}\n\nfunction handleTrigger(xhr, header, elt) {\n    var triggerBody = xhr.getResponseHeader(header);\n    if (triggerBody.indexOf(\"{\") === 0) {\n        var triggers = parseJSON(triggerBody);\n        for (var eventName in triggers) {\n            if (triggers.hasOwnProperty(eventName)) {\n                var detail = triggers[eventName];\n                if (!isRawObject(detail)) {\n                    detail = {\"value\": detail}\n                }\n                triggerEvent(elt, eventName, detail);\n            }\n        }\n    } else {\n        triggerEvent(elt, triggerBody, []);\n    }\n}\n\nvar WHITESPACE = /\\s/;\nvar WHITESPACE_OR_COMMA = /[\\s,]/;\nvar SYMBOL_START = /[_$a-zA-Z]/;\nvar SYMBOL_CONT = /[_$a-zA-Z0-9]/;\nvar STRINGISH_START = ['\"', \"'\", \"/\"];\nvar NOT_WHITESPACE = /[^\\s]/;\nfunction tokenizeString(str) {\n    var tokens = [];\n    var position = 0;\n    while (position < str.length) {\n        if(SYMBOL_START.exec(str.charAt(position))) {\n            var startPosition = position;\n            while (SYMBOL_CONT.exec(str.charAt(position + 1))) {\n                position++;\n            }\n            tokens.push(str.substr(startPosition, position - startPosition + 1));\n        } else if (STRINGISH_START.indexOf(str.charAt(position)) !== -1) {\n            var startChar = str.charAt(position);\n            var startPosition = position;\n            position++;\n            while (position < str.length && str.charAt(position) !== startChar ) {\n                if (str.charAt(position) === \"\\\\\") {\n                    position++;\n                }\n                position++;\n            }\n            tokens.push(str.substr(startPosition, position - startPosition + 1));\n        } else {\n            var symbol = str.charAt(position);\n            tokens.push(symbol);\n        }\n        position++;\n    }\n    return tokens;\n}\n\nfunction isPossibleRelativeReference(token, last, paramName) {\n    return SYMBOL_START.exec(token.charAt(0)) &&\n        token !== \"true\" &&\n        token !== \"false\" &&\n        token !== \"this\" &&\n        token !== paramName &&\n        last !== \".\";\n}\n\nfunction maybeGenerateConditional(elt, tokens, paramName) {\n    if (tokens[0] === '[') {\n        tokens.shift();\n        var bracketCount = 1;\n        var conditionalSource = \" return (function(\" + paramName + \"){ return (\";\n        var last = null;\n        while (tokens.length > 0) {\n            var token = tokens[0];\n            if (token === \"]\") {\n                bracketCount--;\n                if (bracketCount === 0) {\n                    if (last === null) {\n                        conditionalSource = conditionalSource + \"true\";\n                    }\n                    tokens.shift();\n                    conditionalSource += \")})\";\n                    try {\n                        var conditionFunction = maybeEval(elt,function () {\n                            return Function(conditionalSource)();\n                            },\n                            function(){return true})\n                        conditionFunction.source = conditionalSource;\n                        return conditionFunction;\n                    } catch (e) {\n                        triggerErrorEvent(getDocument().body, \"htmx:syntax:error\", {error:e, source:conditionalSource})\n                        return null;\n                    }\n                }\n            } else if (token === \"[\") {\n                bracketCount++;\n            }\n            if (isPossibleRelativeReference(token, last, paramName)) {\n                    conditionalSource += \"((\" + paramName + \".\" + token + \") ? (\" + paramName + \".\" + token + \") : (window.\" + token + \"))\";\n            } else {\n                conditionalSource = conditionalSource + token;\n            }\n            last = tokens.shift();\n        }\n    }\n}\n\nfunction consumeUntil(tokens, match) {\n    var result = \"\";\n    while (tokens.length > 0 && !tokens[0].match(match)) {\n        result += tokens.shift();\n    }\n    return result;\n}\n\nvar INPUT_SELECTOR = 'input, textarea, select';\n\n/**\n * @param {HTMLElement} elt\n * @returns {import(\"./htmx\").HtmxTriggerSpecification[]}\n */\nfunction getTriggerSpecs(elt) {\n    var explicitTrigger = getAttributeValue(elt, 'hx-trigger');\n    var triggerSpecs = [];\n    if (explicitTrigger) {\n        var tokens = tokenizeString(explicitTrigger);\n        do {\n            consumeUntil(tokens, NOT_WHITESPACE);\n            var initialLength = tokens.length;\n            var trigger = consumeUntil(tokens, /[,\\[\\s]/);\n            if (trigger !== \"\") {\n                if (trigger === \"every\") {\n                    var every = {trigger: 'every'};\n                    consumeUntil(tokens, NOT_WHITESPACE);\n                    every.pollInterval = parseInterval(consumeUntil(tokens, /[,\\[\\s]/));\n                    consumeUntil(tokens, NOT_WHITESPACE);\n                    var eventFilter = maybeGenerateConditional(elt, tokens, \"event\");\n                    if (eventFilter) {\n                        every.eventFilter = eventFilter;\n                    }\n                    triggerSpecs.push(every);\n                } else if (trigger.indexOf(\"sse:\") === 0) {\n                    triggerSpecs.push({trigger: 'sse', sseEvent: trigger.substr(4)});\n                } else {\n                    var triggerSpec = {trigger: trigger};\n                    var eventFilter = maybeGenerateConditional(elt, tokens, \"event\");\n                    if (eventFilter) {\n                        triggerSpec.eventFilter = eventFilter;\n                    }\n                    while (tokens.length > 0 && tokens[0] !== \",\") {\n                        consumeUntil(tokens, NOT_WHITESPACE)\n                        var token = tokens.shift();\n                        if (token === \"changed\") {\n                            triggerSpec.changed = true;\n                        } else if (token === \"once\") {\n                            triggerSpec.once = true;\n                        } else if (token === \"consume\") {\n                            triggerSpec.consume = true;\n                        } else if (token === \"delay\" && tokens[0] === \":\") {\n                            tokens.shift();\n                            triggerSpec.delay = parseInterval(consumeUntil(tokens, WHITESPACE_OR_COMMA));\n                        } else if (token === \"from\" && tokens[0] === \":\") {\n                            tokens.shift();\n                            var from_arg = consumeUntil(tokens, WHITESPACE_OR_COMMA);\n                            if (from_arg === \"closest\" || from_arg === \"find\" || from_arg === \"next\" || from_arg === \"previous\") {\n                                tokens.shift();\n                                from_arg +=\n                                    \" \" +\n                                    consumeUntil(\n                                        tokens,\n                                        WHITESPACE_OR_COMMA\n                                    );\n                            }\n                            triggerSpec.from = from_arg;\n                        } else if (token === \"target\" && tokens[0] === \":\") {\n                            tokens.shift();\n                            triggerSpec.target = consumeUntil(tokens, WHITESPACE_OR_COMMA);\n                        } else if (token === \"throttle\" && tokens[0] === \":\") {\n                            tokens.shift();\n                            triggerSpec.throttle = parseInterval(consumeUntil(tokens, WHITESPACE_OR_COMMA));\n                        } else if (token === \"queue\" && tokens[0] === \":\") {\n                            tokens.shift();\n                            triggerSpec.queue = consumeUntil(tokens, WHITESPACE_OR_COMMA);\n                        } else if ((token === \"root\" || token === \"threshold\") && tokens[0] === \":\") {\n                            tokens.shift();\n                            triggerSpec[token] = consumeUntil(tokens, WHITESPACE_OR_COMMA);\n                        } else {\n                            triggerErrorEvent(elt, \"htmx:syntax:error\", {token:tokens.shift()});\n                        }\n                    }\n                    triggerSpecs.push(triggerSpec);\n                }\n            }\n            if (tokens.length === initialLength) {\n                triggerErrorEvent(elt, \"htmx:syntax:error\", {token:tokens.shift()});\n            }\n            consumeUntil(tokens, NOT_WHITESPACE);\n        } while (tokens[0] === \",\" && tokens.shift())\n    }\n\n    if (triggerSpecs.length > 0) {\n        return triggerSpecs;\n    } else if (matches(elt, 'form')) {\n        return [{trigger: 'submit'}];\n    } else if (matches(elt, 'input[type=\"button\"]')){\n        return [{trigger: 'click'}];\n    } else if (matches(elt, INPUT_SELECTOR)) {\n        return [{trigger: 'change'}];\n    } else {\n        return [{trigger: 'click'}];\n    }\n}\n\nfunction cancelPolling(elt) {\n    getInternalData(elt).cancelled = true;\n}\n\nfunction processPolling(elt, handler, spec) {\n    var nodeData = getInternalData(elt);\n    nodeData.timeout = setTimeout(function () {\n        if (bodyContains(elt) && nodeData.cancelled !== true) {\n            if (!maybeFilterEvent(spec, makeEvent('hx:poll:trigger', {triggerSpec:spec, target:elt}))) {\n                handler(elt);\n            }\n            processPolling(elt, handler, spec);\n        }\n    }, spec.pollInterval);\n}\n\nfunction isLocalLink(elt) {\n    return location.hostname === elt.hostname &&\n        getRawAttribute(elt,'href') &&\n        getRawAttribute(elt,'href').indexOf(\"#\") !== 0;\n}\n\nfunction boostElement(elt, nodeData, triggerSpecs) {\n    if ((elt.tagName === \"A\" && isLocalLink(elt) && (elt.target === \"\" || elt.target === \"_self\")) || elt.tagName === \"FORM\") {\n        nodeData.boosted = true;\n        var verb, path;\n        if (elt.tagName === \"A\") {\n            verb = \"get\";\n            path = getRawAttribute(elt, 'href');\n        } else {\n            var rawAttribute = getRawAttribute(elt, \"method\");\n            verb = rawAttribute ? rawAttribute.toLowerCase() : \"get\";\n            if (verb === \"get\") {\n            }\n            path = getRawAttribute(elt, 'action');\n        }\n        triggerSpecs.forEach(function(triggerSpec) {\n            addEventListener(elt, function(elt, evt) {\n                issueAjaxRequest(verb, path, elt, evt)\n            }, nodeData, triggerSpec, true);\n        });\n    }\n}\n\n/**\n *\n * @param {Event} evt\n * @param {HTMLElement} elt\n * @returns\n */\nfunction shouldCancel(evt, elt) {\n    if (evt.type === \"submit\" || evt.type === \"click\") {\n        if (elt.tagName === \"FORM\") {\n            return true;\n        }\n        if (matches(elt, 'input[type=\"submit\"], button') && closest(elt, 'form') !== null) {\n            return true;\n        }\n        if (elt.tagName === \"A\" && elt.href &&\n            (elt.getAttribute('href') === '#' || elt.getAttribute('href').indexOf(\"#\") !== 0)) {\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction ignoreBoostedAnchorCtrlClick(elt, evt) {\n    return getInternalData(elt).boosted && elt.tagName === \"A\" && evt.type === \"click\" && (evt.ctrlKey || evt.metaKey);\n}\n\nfunction maybeFilterEvent(triggerSpec, evt) {\n    var eventFilter = triggerSpec.eventFilter;\n    if(eventFilter){\n        try {\n            return eventFilter(evt) !== true;\n        } catch(e) {\n            triggerErrorEvent(getDocument().body, \"htmx:eventFilter:error\", {error: e, source:eventFilter.source});\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction addEventListener(elt, handler, nodeData, triggerSpec, explicitCancel) {\n    var eltsToListenOn;\n    if (triggerSpec.from) {\n        eltsToListenOn = querySelectorAllExt(elt, triggerSpec.from);\n    } else {\n        eltsToListenOn = [elt];\n    }\n    forEach(eltsToListenOn, function (eltToListenOn) {\n        var eventListener = function (evt) {\n            if (!bodyContains(elt)) {\n                eltToListenOn.removeEventListener(triggerSpec.trigger, eventListener);\n                return;\n            }\n            if (ignoreBoostedAnchorCtrlClick(elt, evt)) {\n                return;\n            }\n            if (explicitCancel || shouldCancel(evt, elt)) {\n                evt.preventDefault();\n            }\n            if (maybeFilterEvent(triggerSpec, evt)) {\n                return;\n            }\n            var eventData = getInternalData(evt);\n            eventData.triggerSpec = triggerSpec;\n            if (eventData.handledFor == null) {\n                eventData.handledFor = [];\n            }\n            var elementData = getInternalData(elt);\n            if (eventData.handledFor.indexOf(elt) < 0) {\n                eventData.handledFor.push(elt);\n                if (triggerSpec.consume) {\n                    evt.stopPropagation();\n                }\n                if (triggerSpec.target && evt.target) {\n                    if (!matches(evt.target, triggerSpec.target)) {\n                        return;\n                    }\n                }\n                if (triggerSpec.once) {\n                    if (elementData.triggeredOnce) {\n                        return;\n                    } else {\n                        elementData.triggeredOnce = true;\n                    }\n                }\n                if (triggerSpec.changed) {\n                    if (elementData.lastValue === elt.value) {\n                        return;\n                    } else {\n                        elementData.lastValue = elt.value;\n                    }\n                }\n                if (elementData.delayed) {\n                    clearTimeout(elementData.delayed);\n                }\n                if (elementData.throttle) {\n                    return;\n                }\n\n                if (triggerSpec.throttle) {\n                    if (!elementData.throttle) {\n                        handler(elt, evt);\n                        elementData.throttle = setTimeout(function () {\n                            elementData.throttle = null;\n                        }, triggerSpec.throttle);\n                    }\n                } else if (triggerSpec.delay) {\n                    elementData.delayed = setTimeout(function() { handler(elt, evt) }, triggerSpec.delay);\n                } else {\n                    handler(elt, evt);\n                }\n            }\n        };\n        if (nodeData.listenerInfos == null) {\n            nodeData.listenerInfos = [];\n        }\n        nodeData.listenerInfos.push({\n            trigger: triggerSpec.trigger,\n            listener: eventListener,\n            on: eltToListenOn\n        })\n        eltToListenOn.addEventListener(triggerSpec.trigger, eventListener);\n    })\n}\n\nvar windowIsScrolling = false // used by initScrollHandler\nvar scrollHandler = null;\nfunction initScrollHandler() {\n    if (!scrollHandler) {\n        scrollHandler = function() {\n            windowIsScrolling = true\n        };\n        window.addEventListener(\"scroll\", scrollHandler)\n        setInterval(function() {\n            if (windowIsScrolling) {\n                windowIsScrolling = false;\n                forEach(getDocument().querySelectorAll(\"[hx-trigger='revealed'],[data-hx-trigger='revealed']\"), function (elt) {\n                    maybeReveal(elt);\n                })\n            }\n        }, 200);\n    }\n}\n\nfunction maybeReveal(elt) {\n    if (!hasAttribute(elt,'data-hx-revealed') && isScrolledIntoView(elt)) {\n        elt.setAttribute('data-hx-revealed', 'true');\n        var nodeData = getInternalData(elt);\n        if (nodeData.initHash) {\n            triggerEvent(elt, 'revealed');\n        } else {\n            // if the node isn't initialized, wait for it before triggering the request\n            elt.addEventListener(\"htmx:afterProcessNode\", function(evt) { triggerEvent(elt, 'revealed') }, {once: true});\n        }\n    }\n}\n\n//====================================================================\n// Web Sockets\n//====================================================================\n\nfunction processWebSocketInfo(elt, nodeData, info) {\n    var values = splitOnWhitespace(info);\n    for (var i = 0; i < values.length; i++) {\n        var value = values[i].split(/:(.+)/);\n        if (value[0] === \"connect\") {\n            ensureWebSocket(elt, value[1], 0);\n        }\n        if (value[0] === \"send\") {\n            processWebSocketSend(elt);\n        }\n    }\n}\n\nfunction ensureWebSocket(elt, wssSource, retryCount) {\n    if (!bodyContains(elt)) {\n        return;  // stop ensuring websocket connection when socket bearing element ceases to exist\n    }\n\n    if (wssSource.indexOf(\"/\") == 0) {  // complete absolute paths only\n        var base_part = location.hostname + (location.port ? ':'+location.port: '');\n        if (location.protocol == 'https:') {\n            wssSource = \"wss://\" + base_part + wssSource;\n        } else if (location.protocol == 'http:') {\n            wssSource = \"ws://\" + base_part + wssSource;\n        }\n    }\n    var socket = htmx.createWebSocket(wssSource);\n    socket.onerror = function (e) {\n        triggerErrorEvent(elt, \"htmx:wsError\", {error:e, socket:socket});\n        maybeCloseWebSocketSource(elt);\n    };\n\n    socket.onclose = function (e) {\n        if ([1006, 1012, 1013].indexOf(e.code) >= 0) {  // Abnormal Closure/Service Restart/Try Again Later\n            var delay = getWebSocketReconnectDelay(retryCount);\n            setTimeout(function() {\n                ensureWebSocket(elt, wssSource, retryCount+1);  // creates a websocket with a new timeout\n            }, delay);\n        }\n    };\n    socket.onopen = function (e) {\n        retryCount = 0;\n    }\n\n    getInternalData(elt).webSocket = socket;\n    socket.addEventListener('message', function (event) {\n        if (maybeCloseWebSocketSource(elt)) {\n            return;\n        }\n\n        var response = event.data;\n        withExtensions(elt, function(extension){\n            response = extension.transformResponse(response, null, elt);\n        });\n\n        var settleInfo = makeSettleInfo(elt);\n        var fragment = makeFragment(response);\n        var children = toArray(fragment.children);\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            oobSwap(getAttributeValue(child, \"hx-swap-oob\") || \"true\", child, settleInfo);\n        }\n\n        settleImmediately(settleInfo.tasks);\n    });\n}\n\nfunction maybeCloseWebSocketSource(elt) {\n    if (!bodyContains(elt)) {\n        getInternalData(elt).webSocket.close();\n        return true;\n    }\n}\n\nfunction processWebSocketSend(elt) {\n    var webSocketSourceElt = getClosestMatch(elt, function (parent) {\n        return getInternalData(parent).webSocket != null;\n    });\n    if (webSocketSourceElt) {\n        elt.addEventListener(getTriggerSpecs(elt)[0].trigger, function (evt) {\n            var webSocket = getInternalData(webSocketSourceElt).webSocket;\n            var headers = getHeaders(elt, webSocketSourceElt);\n            var results = getInputValues(elt, 'post');\n            var errors = results.errors;\n            var rawParameters = results.values;\n            var expressionVars = getExpressionVars(elt);\n            var allParameters = mergeObjects(rawParameters, expressionVars);\n            var filteredParameters = filterValues(allParameters, elt);\n            filteredParameters['HEADERS'] = headers;\n            if (errors && errors.length > 0) {\n                triggerEvent(elt, 'htmx:validation:halted', errors);\n                return;\n            }\n            webSocket.send(JSON.stringify(filteredParameters));\n            if(shouldCancel(evt, elt)){\n                evt.preventDefault();\n            }\n        });\n    } else {\n        triggerErrorEvent(elt, \"htmx:noWebSocketSourceError\");\n    }\n}\n\nfunction getWebSocketReconnectDelay(retryCount) {\n    var delay = htmx.config.wsReconnectDelay;\n    if (typeof delay === 'function') {\n        // @ts-ignore\n        return delay(retryCount);\n    }\n    if (delay === 'full-jitter') {\n        var exp = Math.min(retryCount, 6);\n        var maxDelay = 1000 * Math.pow(2, exp);\n        return maxDelay * Math.random();\n    }\n    logError('htmx.config.wsReconnectDelay must either be a function or the string \"full-jitter\"');\n}\n\n//====================================================================\n// Server Sent Events\n//====================================================================\n\nfunction processSSEInfo(elt, nodeData, info) {\n    var values = splitOnWhitespace(info);\n    for (var i = 0; i < values.length; i++) {\n        var value = values[i].split(/:(.+)/);\n        if (value[0] === \"connect\") {\n            processSSESource(elt, value[1]);\n        }\n\n        if ((value[0] === \"swap\")) {\n            processSSESwap(elt, value[1])\n        }\n    }\n}\n\nfunction processSSESource(elt, sseSrc) {\n    var source = htmx.createEventSource(sseSrc);\n    source.onerror = function (e) {\n        triggerErrorEvent(elt, \"htmx:sseError\", {error:e, source:source});\n        maybeCloseSSESource(elt);\n    };\n    getInternalData(elt).sseEventSource = source;\n}\n\nfunction processSSESwap(elt, sseEventName) {\n    var sseSourceElt = getClosestMatch(elt, hasEventSource);\n    if (sseSourceElt) {\n        var sseEventSource = getInternalData(sseSourceElt).sseEventSource;\n        var sseListener = function (event) {\n            if (maybeCloseSSESource(sseSourceElt)) {\n                sseEventSource.removeEventListener(sseEventName, sseListener);\n                return;\n            }\n\n            ///////////////////////////\n            // TODO: merge this code with AJAX and WebSockets code in the future.\n\n            var response = event.data;\n            withExtensions(elt, function(extension){\n                response = extension.transformResponse(response, null, elt);\n            });\n\n            var swapSpec = getSwapSpecification(elt)\n            var target = getTarget(elt)\n            var settleInfo = makeSettleInfo(elt);\n\n            selectAndSwap(swapSpec.swapStyle, elt, target, response, settleInfo)\n            settleImmediately(settleInfo.tasks)\n            triggerEvent(elt, \"htmx:sseMessage\", event)\n        };\n\n        getInternalData(elt).sseListener = sseListener;\n        sseEventSource.addEventListener(sseEventName, sseListener);\n    } else {\n        triggerErrorEvent(elt, \"htmx:noSSESourceError\");\n    }\n}\n\nfunction processSSETrigger(elt, handler, sseEventName) {\n    var sseSourceElt = getClosestMatch(elt, hasEventSource);\n    if (sseSourceElt) {\n        var sseEventSource = getInternalData(sseSourceElt).sseEventSource;\n        var sseListener = function () {\n            if (!maybeCloseSSESource(sseSourceElt)) {\n                if (bodyContains(elt)) {\n                    handler(elt);\n                } else {\n                    sseEventSource.removeEventListener(sseEventName, sseListener);\n                }\n            }\n        };\n        getInternalData(elt).sseListener = sseListener;\n        sseEventSource.addEventListener(sseEventName, sseListener);\n    } else {\n        triggerErrorEvent(elt, \"htmx:noSSESourceError\");\n    }\n}\n\nfunction maybeCloseSSESource(elt) {\n    if (!bodyContains(elt)) {\n        getInternalData(elt).sseEventSource.close();\n        return true;\n    }\n}\n\nfunction hasEventSource(node) {\n    return getInternalData(node).sseEventSource != null;\n}\n\n//====================================================================\n\nfunction loadImmediately(elt, handler, nodeData, delay) {\n    var load = function(){\n        if (!nodeData.loaded) {\n            nodeData.loaded = true;\n            handler(elt);\n        }\n    }\n    if (delay) {\n        setTimeout(load, delay);\n    } else {\n        load();\n    }\n}\n\nfunction processVerbs(elt, nodeData, triggerSpecs) {\n    var explicitAction = false;\n    forEach(VERBS, function (verb) {\n        if (hasAttribute(elt,'hx-' + verb)) {\n            var path = getAttributeValue(elt, 'hx-' + verb);\n            explicitAction = true;\n            nodeData.path = path;\n            nodeData.verb = verb;\n            triggerSpecs.forEach(function(triggerSpec) {\n                addTriggerHandler(elt, triggerSpec, nodeData, function (elt, evt) {\n                    issueAjaxRequest(verb, path, elt, evt)\n                })\n            });\n        }\n    });\n    return explicitAction;\n}\n\nfunction addTriggerHandler(elt, triggerSpec, nodeData, handler) {\n    if (triggerSpec.sseEvent) {\n        processSSETrigger(elt, handler, triggerSpec.sseEvent);\n    } else if (triggerSpec.trigger === \"revealed\") {\n        initScrollHandler();\n        addEventListener(elt, handler, nodeData, triggerSpec);\n        maybeReveal(elt);\n    } else if (triggerSpec.trigger === \"intersect\") {\n        var observerOptions = {};\n        if (triggerSpec.root) {\n            observerOptions.root = querySelectorExt(elt, triggerSpec.root)\n        }\n        if (triggerSpec.threshold) {\n            observerOptions.threshold = parseFloat(triggerSpec.threshold);\n        }\n        var observer = new IntersectionObserver(function (entries) {\n            for (var i = 0; i < entries.length; i++) {\n                var entry = entries[i];\n                if (entry.isIntersecting) {\n                    triggerEvent(elt, \"intersect\");\n                    break;\n                }\n            }\n        }, observerOptions);\n        observer.observe(elt);\n        addEventListener(elt, handler, nodeData, triggerSpec);\n    } else if (triggerSpec.trigger === \"load\") {\n        if (!maybeFilterEvent(triggerSpec, makeEvent(\"load\", {elt:elt}))) {\n                        loadImmediately(elt, handler, nodeData, triggerSpec.delay);\n                    }\n    } else if (triggerSpec.pollInterval) {\n        nodeData.polling = true;\n        processPolling(elt, handler, triggerSpec);\n    } else {\n        addEventListener(elt, handler, nodeData, triggerSpec);\n    }\n}\n\nfunction evalScript(script) {\n    if (script.type === \"text/javascript\" || script.type === \"module\" || script.type === \"\") {\n        var newScript = getDocument().createElement(\"script\");\n        forEach(script.attributes, function (attr) {\n            newScript.setAttribute(attr.name, attr.value);\n        });\n        newScript.textContent = script.textContent;\n        newScript.async = false;\n        if (htmx.config.inlineScriptNonce) {\n            newScript.nonce = htmx.config.inlineScriptNonce;\n        }\n        var parent = script.parentElement;\n\n        try {\n            parent.insertBefore(newScript, script);\n        } catch (e) {\n            logError(e);\n        } finally {\n            // remove old script element, but only if it is still in DOM\n            if (script.parentElement) {\n                script.parentElement.removeChild(script);\n            }\n        }\n    }\n}\n\nfunction processScripts(elt) {\n    if (matches(elt, \"script\")) {\n        evalScript(elt);\n    }\n    forEach(findAll(elt, \"script\"), function (script) {\n        evalScript(script);\n    });\n}\n\nfunction hasChanceOfBeingBoosted() {\n    return document.querySelector(\"[hx-boost], [data-hx-boost]\");\n}\n\nfunction findElementsToProcess(elt) {\n    if (elt.querySelectorAll) {\n        var boostedElts = hasChanceOfBeingBoosted() ? \", a, form\" : \"\";\n        var results = elt.querySelectorAll(VERB_SELECTOR + boostedElts + \", [hx-sse], [data-hx-sse], [hx-ws],\" +\n            \" [data-hx-ws], [hx-ext], [data-hx-ext]\");\n        return results;\n    } else {\n        return [];\n    }\n}\n\nfunction initButtonTracking(form){\n    var maybeSetLastButtonClicked = function(evt){\n        var elt = closest(evt.target, \"button, input[type='submit']\");\n        if (elt !== null) {\n            var internalData = getInternalData(form);\n            internalData.lastButtonClicked = elt;\n        }\n    };\n\n    // need to handle both click and focus in:\n    //   focusin - in case someone tabs in to a button and hits the space bar\n    //   click - on OSX buttons do not focus on click see https://bugs.webkit.org/show_bug.cgi?id=13724\n\n    form.addEventListener('click', maybeSetLastButtonClicked)\n    form.addEventListener('focusin', maybeSetLastButtonClicked)\n    form.addEventListener('focusout', function(evt){\n        var internalData = getInternalData(form);\n        internalData.lastButtonClicked = null;\n    })\n}\n\nfunction initNode(elt) {\n    if (elt.closest && elt.closest(htmx.config.disableSelector)) {\n        return;\n    }\n    var nodeData = getInternalData(elt);\n    if (nodeData.initHash !== attributeHash(elt)) {\n\n        nodeData.initHash = attributeHash(elt);\n\n        // clean up any previously processed info\n        deInitNode(elt);\n\n        triggerEvent(elt, \"htmx:beforeProcessNode\")\n\n        if (elt.value) {\n            nodeData.lastValue = elt.value;\n        }\n\n        var triggerSpecs = getTriggerSpecs(elt);\n        var explicitAction = processVerbs(elt, nodeData, triggerSpecs);\n\n        if (!explicitAction && getClosestAttributeValue(elt, \"hx-boost\") === \"true\") {\n            boostElement(elt, nodeData, triggerSpecs);\n        }\n\n        if (elt.tagName === \"FORM\") {\n            initButtonTracking(elt);\n        }\n\n        var sseInfo = getAttributeValue(elt, 'hx-sse');\n        if (sseInfo) {\n            processSSEInfo(elt, nodeData, sseInfo);\n        }\n\n        var wsInfo = getAttributeValue(elt, 'hx-ws');\n        if (wsInfo) {\n            processWebSocketInfo(elt, nodeData, wsInfo);\n        }\n        triggerEvent(elt, \"htmx:afterProcessNode\");\n    }\n}\n\nfunction processNode(elt) {\n    elt = resolveTarget(elt);\n    initNode(elt);\n    forEach(findElementsToProcess(elt), function(child) { initNode(child) });\n}\n\n//====================================================================\n// Event/Log Support\n//====================================================================\n\nfunction kebabEventName(str) {\n    return str.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\n}\n\nfunction makeEvent(eventName, detail) {\n    var evt;\n    if (window.CustomEvent && typeof window.CustomEvent === 'function') {\n        evt = new CustomEvent(eventName, {bubbles: true, cancelable: true, detail: detail});\n    } else {\n        evt = getDocument().createEvent('CustomEvent');\n        evt.initCustomEvent(eventName, true, true, detail);\n    }\n    return evt;\n}\n\nfunction triggerErrorEvent(elt, eventName, detail) {\n    triggerEvent(elt, eventName, mergeObjects({error:eventName}, detail));\n}\n\nfunction ignoreEventForLogging(eventName) {\n    return eventName === \"htmx:afterProcessNode\"\n}\n\n/**\n * `withExtensions` locates all active extensions for a provided element, then\n * executes the provided function using each of the active extensions.  It should\n * be called internally at every extendable execution point in htmx.\n *\n * @param {HTMLElement} elt\n * @param {(extension:import(\"./htmx\").HtmxExtension) => void} toDo\n * @returns void\n */\nfunction withExtensions(elt, toDo) {\n    forEach(getExtensions(elt), function(extension){\n        try {\n            toDo(extension);\n        } catch (e) {\n            logError(e);\n        }\n    });\n}\n\nfunction logError(msg) {\n    if(console.error) {\n        console.error(msg);\n    } else if (console.log) {\n        console.log(\"ERROR: \", msg);\n    }\n}\n\nfunction triggerEvent(elt, eventName, detail) {\n    elt = resolveTarget(elt);\n    if (detail == null) {\n        detail = {};\n    }\n    detail[\"elt\"] = elt;\n    var event = makeEvent(eventName, detail);\n    if (htmx.logger && !ignoreEventForLogging(eventName)) {\n        htmx.logger(elt, eventName, detail);\n    }\n    if (detail.error) {\n        logError(detail.error);\n        triggerEvent(elt, \"htmx:error\", {errorInfo:detail})\n    }\n    var eventResult = elt.dispatchEvent(event);\n    var kebabName = kebabEventName(eventName);\n    if (eventResult && kebabName !== eventName) {\n        var kebabedEvent = makeEvent(kebabName, event.detail);\n        eventResult = eventResult && elt.dispatchEvent(kebabedEvent)\n    }\n    withExtensions(elt, function (extension) {\n        eventResult = eventResult && (extension.onEvent(eventName, event) !== false)\n    });\n    return eventResult;\n}\n\n//====================================================================\n// History Support\n//====================================================================\nvar currentPathForHistory = location.pathname+location.search;\n\nfunction getHistoryElement() {\n    var historyElt = getDocument().querySelector('[hx-history-elt],[data-hx-history-elt]');\n    return historyElt || getDocument().body;\n}\n\nfunction saveToHistoryCache(url, content, title, scroll) {\n    if (!canAccessLocalStorage()) {\n        return;\n    }\n\n    var historyCache = parseJSON(localStorage.getItem(\"htmx-history-cache\")) || [];\n    for (var i = 0; i < historyCache.length; i++) {\n        if (historyCache[i].url === url) {\n            historyCache.splice(i, 1);\n            break;\n        }\n    }\n    var newHistoryItem = {url:url, content: content, title:title, scroll:scroll};\n    triggerEvent(getDocument().body, \"htmx:historyItemCreated\", {item:newHistoryItem, cache: historyCache})\n    historyCache.push(newHistoryItem)\n    while (historyCache.length > htmx.config.historyCacheSize) {\n        historyCache.shift();\n    }\n    while(historyCache.length > 0){\n        try {\n            localStorage.setItem(\"htmx-history-cache\", JSON.stringify(historyCache));\n            break;\n        } catch (e) {\n            triggerErrorEvent(getDocument().body, \"htmx:historyCacheError\", {cause:e, cache: historyCache})\n            historyCache.shift(); // shrink the cache and retry\n        }\n    }\n}\n\nfunction getCachedHistory(url) {\n    if (!canAccessLocalStorage()) {\n        return null;\n    }\n\n    var historyCache = parseJSON(localStorage.getItem(\"htmx-history-cache\")) || [];\n    for (var i = 0; i < historyCache.length; i++) {\n        if (historyCache[i].url === url) {\n            return historyCache[i];\n        }\n    }\n    return null;\n}\n\nfunction cleanInnerHtmlForHistory(elt) {\n    var className = htmx.config.requestClass;\n    var clone = elt.cloneNode(true);\n    forEach(findAll(clone, \".\" + className), function(child){\n        removeClassFromElement(child, className);\n    });\n    return clone.innerHTML;\n}\n\nfunction saveCurrentPageToHistory() {\n    var elt = getHistoryElement();\n    var path = currentPathForHistory || location.pathname+location.search;\n\n    // Allow history snapshot feature to be disabled where hx-history=\"false\"\n    // is present *anywhere* in the current document we're about to save,\n    // so we can prevent privileged data entering the cache.\n    // The page will still be reachable as a history entry, but htmx will fetch it\n    // live from the server onpopstate rather than look in the localStorage cache\n    var disableHistoryCache = getDocument().querySelector('[hx-history=\"false\" i],[data-hx-history=\"false\" i]');\n    if (!disableHistoryCache) {\n        triggerEvent(getDocument().body, \"htmx:beforeHistorySave\", {path: path, historyElt: elt});\n        saveToHistoryCache(path, cleanInnerHtmlForHistory(elt), getDocument().title, window.scrollY);\n    }\n\n    if (htmx.config.historyEnabled) history.replaceState({htmx: true}, getDocument().title, window.location.href);\n}\n\nfunction pushUrlIntoHistory(path) {\n    // remove the cache buster parameter, if any\n    if (htmx.config.getCacheBusterParam) {\n        path = path.replace(/org\\.htmx\\.cache-buster=[^&]*&?/, '')\n        if (path.endsWith('&') || path.endsWith(\"?\")) {\n            path = path.slice(0, -1);\n        }\n    }\n    if(htmx.config.historyEnabled) {\n        history.pushState({htmx:true}, \"\", path);\n    }\n    currentPathForHistory = path;\n}\n\nfunction replaceUrlInHistory(path) {\n    if(htmx.config.historyEnabled)  history.replaceState({htmx:true}, \"\", path);\n    currentPathForHistory = path;\n}\n\nfunction settleImmediately(tasks) {\n    forEach(tasks, function (task) {\n        task.call();\n    });\n}\n\nfunction loadHistoryFromServer(path) {\n    var request = new XMLHttpRequest();\n    var details = {path: path, xhr:request};\n    triggerEvent(getDocument().body, \"htmx:historyCacheMiss\", details);\n    request.open('GET', path, true);\n    request.setRequestHeader(\"HX-History-Restore-Request\", \"true\");\n    request.onload = function () {\n        if (this.status >= 200 && this.status < 400) {\n            triggerEvent(getDocument().body, \"htmx:historyCacheMissLoad\", details);\n            var fragment = makeFragment(this.response);\n            // @ts-ignore\n            fragment = fragment.querySelector('[hx-history-elt],[data-hx-history-elt]') || fragment;\n            var historyElement = getHistoryElement();\n            var settleInfo = makeSettleInfo(historyElement);\n            var title = findTitle(this.response);\n            if (title) {\n                var titleElt = find(\"title\");\n                if (titleElt) {\n                    titleElt.innerHTML = title;\n                } else {\n                    window.document.title = title;\n                }\n            }\n            // @ts-ignore\n            swapInnerHTML(historyElement, fragment, settleInfo)\n            settleImmediately(settleInfo.tasks);\n            currentPathForHistory = path;\n            triggerEvent(getDocument().body, \"htmx:historyRestore\", {path: path, cacheMiss:true, serverResponse:this.response});\n        } else {\n            triggerErrorEvent(getDocument().body, \"htmx:historyCacheMissLoadError\", details);\n        }\n    };\n    request.send();\n}\n\nfunction restoreHistory(path) {\n    saveCurrentPageToHistory();\n    path = path || location.pathname+location.search;\n    var cached = getCachedHistory(path);\n    if (cached) {\n        var fragment = makeFragment(cached.content);\n        var historyElement = getHistoryElement();\n        var settleInfo = makeSettleInfo(historyElement);\n        swapInnerHTML(historyElement, fragment, settleInfo)\n        settleImmediately(settleInfo.tasks);\n        document.title = cached.title;\n        window.scrollTo(0, cached.scroll);\n        currentPathForHistory = path;\n        triggerEvent(getDocument().body, \"htmx:historyRestore\", {path:path, item:cached});\n    } else {\n        if (htmx.config.refreshOnHistoryMiss) {\n\n            // @ts-ignore: optional parameter in reload() function throws error\n            window.location.reload(true);\n        } else {\n            loadHistoryFromServer(path);\n        }\n    }\n}\n\nfunction addRequestIndicatorClasses(elt) {\n    var indicators = findAttributeTargets(elt, 'hx-indicator');\n    if (indicators == null) {\n        indicators = [elt];\n    }\n    forEach(indicators, function (ic) {\n        var internalData = getInternalData(ic);\n        internalData.requestCount = (internalData.requestCount || 0) + 1;\n        ic.classList[\"add\"].call(ic.classList, htmx.config.requestClass);\n    });\n    return indicators;\n}\n\nfunction removeRequestIndicatorClasses(indicators) {\n    forEach(indicators, function (ic) {\n        var internalData = getInternalData(ic);\n        internalData.requestCount = (internalData.requestCount || 0) - 1;\n        if (internalData.requestCount === 0) {\n            ic.classList[\"remove\"].call(ic.classList, htmx.config.requestClass);\n        }\n    });\n}\n\n//====================================================================\n// Input Value Processing\n//====================================================================\n\nfunction haveSeenNode(processed, elt) {\n    for (var i = 0; i < processed.length; i++) {\n        var node = processed[i];\n        if (node.isSameNode(elt)) {\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction shouldInclude(elt) {\n    if(elt.name === \"\" || elt.name == null || elt.disabled) {\n        return false;\n    }\n    // ignore \"submitter\" types (see jQuery src/serialize.js)\n    if (elt.type === \"button\" || elt.type === \"submit\" || elt.tagName === \"image\" || elt.tagName === \"reset\" || elt.tagName === \"file\" ) {\n        return false;\n    }\n    if (elt.type === \"checkbox\" || elt.type === \"radio\" ) {\n        return elt.checked;\n    }\n    return true;\n}\n\nfunction processInputValue(processed, values, errors, elt, validate) {\n    if (elt == null || haveSeenNode(processed, elt)) {\n        return;\n    } else {\n        processed.push(elt);\n    }\n    if (shouldInclude(elt)) {\n        var name = getRawAttribute(elt,\"name\");\n        var value = elt.value;\n        if (elt.multiple) {\n            value = toArray(elt.querySelectorAll(\"option:checked\")).map(function (e) { return e.value });\n        }\n        // include file inputs\n        if (elt.files) {\n            value = toArray(elt.files);\n        }\n        // This is a little ugly because both the current value of the named value in the form\n        // and the new value could be arrays, so we have to handle all four cases :/\n        if (name != null && value != null) {\n            var current = values[name];\n            if (current !== undefined) {\n                if (Array.isArray(current)) {\n                    if (Array.isArray(value)) {\n                        values[name] = current.concat(value);\n                    } else {\n                        current.push(value);\n                    }\n                } else {\n                    if (Array.isArray(value)) {\n                        values[name] = [current].concat(value);\n                    } else {\n                        values[name] = [current, value];\n                    }\n                }\n            } else {\n                values[name] = value;\n            }\n        }\n        if (validate) {\n            validateElement(elt, errors);\n        }\n    }\n    if (matches(elt, 'form')) {\n        var inputs = elt.elements;\n        forEach(inputs, function(input) {\n            processInputValue(processed, values, errors, input, validate);\n        });\n    }\n}\n\nfunction validateElement(element, errors) {\n    if (element.willValidate) {\n        triggerEvent(element, \"htmx:validation:validate\")\n        if (!element.checkValidity()) {\n            errors.push({elt: element, message:element.validationMessage, validity:element.validity});\n            triggerEvent(element, \"htmx:validation:failed\", {message:element.validationMessage, validity:element.validity})\n        }\n    }\n}\n\n/**\n * @param {HTMLElement} elt\n * @param {string} verb\n */\nfunction getInputValues(elt, verb) {\n    var processed = [];\n    var values = {};\n    var formValues = {};\n    var errors = [];\n    var internalData = getInternalData(elt);\n\n    // only validate when form is directly submitted and novalidate or formnovalidate are not set\n    // or if the element has an explicit hx-validate=\"true\" on it\n    var validate = (matches(elt, 'form') && elt.noValidate !== true) || getAttributeValue(elt, \"hx-validate\") === \"true\";\n    if (internalData.lastButtonClicked) {\n        validate = validate && internalData.lastButtonClicked.formNoValidate !== true;\n    }\n\n    // for a non-GET include the closest form\n    if (verb !== 'get') {\n        processInputValue(processed, formValues, errors, closest(elt, 'form'), validate);\n    }\n\n    // include the element itself\n    processInputValue(processed, values, errors, elt, validate);\n\n    // if a button or submit was clicked last, include its value\n    if (internalData.lastButtonClicked) {\n        var name = getRawAttribute(internalData.lastButtonClicked,\"name\");\n        if (name) {\n            values[name] = internalData.lastButtonClicked.value;\n        }\n    }\n\n    // include any explicit includes\n    var includes = findAttributeTargets(elt, \"hx-include\");\n    forEach(includes, function(node) {\n        processInputValue(processed, values, errors, node, validate);\n        // if a non-form is included, include any input values within it\n        if (!matches(node, 'form')) {\n            forEach(node.querySelectorAll(INPUT_SELECTOR), function (descendant) {\n                processInputValue(processed, values, errors, descendant, validate);\n            })\n        }\n    });\n\n    // form values take precedence, overriding the regular values\n    values = mergeObjects(values, formValues);\n\n    return {errors:errors, values:values};\n}\n\nfunction appendParam(returnStr, name, realValue) {\n    if (returnStr !== \"\") {\n        returnStr += \"&\";\n    }\n    if (String(realValue) === \"[object Object]\") {\n        realValue = JSON.stringify(realValue);\n    }\n    var s = encodeURIComponent(realValue);\n    returnStr += encodeURIComponent(name) + \"=\" + s;\n    return returnStr;\n}\n\nfunction urlEncode(values) {\n    var returnStr = \"\";\n    for (var name in values) {\n        if (values.hasOwnProperty(name)) {\n            var value = values[name];\n            if (Array.isArray(value)) {\n                forEach(value, function(v) {\n                    returnStr = appendParam(returnStr, name, v);\n                });\n            } else {\n                returnStr = appendParam(returnStr, name, value);\n            }\n        }\n    }\n    return returnStr;\n}\n\nfunction makeFormData(values) {\n    var formData = new FormData();\n    for (var name in values) {\n        if (values.hasOwnProperty(name)) {\n            var value = values[name];\n            if (Array.isArray(value)) {\n                forEach(value, function(v) {\n                    formData.append(name, v);\n                });\n            } else {\n                formData.append(name, value);\n            }\n        }\n    }\n    return formData;\n}\n\n//====================================================================\n// Ajax\n//====================================================================\n\n/**\n * @param {HTMLElement} elt\n * @param {HTMLElement} target\n * @param {string} prompt\n * @returns {Object} // TODO: Define/Improve HtmxHeaderSpecification\n */\nfunction getHeaders(elt, target, prompt) {\n    var headers = {\n        \"HX-Request\" : \"true\",\n        \"HX-Trigger\" : getRawAttribute(elt, \"id\"),\n        \"HX-Trigger-Name\" : getRawAttribute(elt, \"name\"),\n        \"HX-Target\" : getAttributeValue(target, \"id\"),\n        \"HX-Current-URL\" : getDocument().location.href,\n    }\n    getValuesForElement(elt, \"hx-headers\", false, headers)\n    if (prompt !== undefined) {\n        headers[\"HX-Prompt\"] = prompt;\n    }\n    if (getInternalData(elt).boosted) {\n        headers[\"HX-Boosted\"] = \"true\";\n    }\n    return headers;\n}\n\n/**\n * filterValues takes an object containing form input values\n * and returns a new object that only contains keys that are\n * specified by the closest \"hx-params\" attribute\n * @param {Object} inputValues\n * @param {HTMLElement} elt\n * @returns {Object}\n */\nfunction filterValues(inputValues, elt) {\n    var paramsValue = getClosestAttributeValue(elt, \"hx-params\");\n    if (paramsValue) {\n        if (paramsValue === \"none\") {\n            return {};\n        } else if (paramsValue === \"*\") {\n            return inputValues;\n        } else if(paramsValue.indexOf(\"not \") === 0) {\n            forEach(paramsValue.substr(4).split(\",\"), function (name) {\n                name = name.trim();\n                delete inputValues[name];\n            });\n            return inputValues;\n        } else {\n            var newValues = {}\n            forEach(paramsValue.split(\",\"), function (name) {\n                name = name.trim();\n                newValues[name] = inputValues[name];\n            });\n            return newValues;\n        }\n    } else {\n        return inputValues;\n    }\n}\n\nfunction isAnchorLink(elt) {\n  return getRawAttribute(elt, 'href') && getRawAttribute(elt, 'href').indexOf(\"#\") >=0\n}\n\n/**\n *\n * @param {HTMLElement} elt\n * @param {string} swapInfoOverride\n * @returns {import(\"./htmx\").HtmxSwapSpecification}\n */\nfunction getSwapSpecification(elt, swapInfoOverride) {\n    var swapInfo = swapInfoOverride ? swapInfoOverride : getClosestAttributeValue(elt, \"hx-swap\");\n    var swapSpec = {\n        \"swapStyle\" : getInternalData(elt).boosted ? 'innerHTML' : htmx.config.defaultSwapStyle,\n        \"swapDelay\" : htmx.config.defaultSwapDelay,\n        \"settleDelay\" : htmx.config.defaultSettleDelay\n    }\n    if (getInternalData(elt).boosted && !isAnchorLink(elt)) {\n      swapSpec[\"show\"] = \"top\"\n    }\n    if (swapInfo) {\n        var split = splitOnWhitespace(swapInfo);\n        if (split.length > 0) {\n            swapSpec[\"swapStyle\"] = split[0];\n            for (var i = 1; i < split.length; i++) {\n                var modifier = split[i];\n                if (modifier.indexOf(\"swap:\") === 0) {\n                    swapSpec[\"swapDelay\"] = parseInterval(modifier.substr(5));\n                }\n                if (modifier.indexOf(\"settle:\") === 0) {\n                    swapSpec[\"settleDelay\"] = parseInterval(modifier.substr(7));\n                }\n                if (modifier.indexOf(\"scroll:\") === 0) {\n                    var scrollSpec = modifier.substr(7);\n                    var splitSpec = scrollSpec.split(\":\");\n                    var scrollVal = splitSpec.pop();\n                    var selectorVal = splitSpec.length > 0 ? splitSpec.join(\":\") : null;\n                    swapSpec[\"scroll\"] = scrollVal;\n                    swapSpec[\"scrollTarget\"] = selectorVal;\n                }\n                if (modifier.indexOf(\"show:\") === 0) {\n                    var showSpec = modifier.substr(5);\n                    var splitSpec = showSpec.split(\":\");\n                    var showVal = splitSpec.pop();\n                    var selectorVal = splitSpec.length > 0 ? splitSpec.join(\":\") : null;\n                    swapSpec[\"show\"] = showVal;\n                    swapSpec[\"showTarget\"] = selectorVal;\n                }\n                if (modifier.indexOf(\"focus-scroll:\") === 0) {\n                    var focusScrollVal = modifier.substr(\"focus-scroll:\".length);\n                    swapSpec[\"focusScroll\"] = focusScrollVal == \"true\";\n                }\n            }\n        }\n    }\n    return swapSpec;\n}\n\nfunction usesFormData(elt) {\n    return getClosestAttributeValue(elt, \"hx-encoding\") === \"multipart/form-data\" ||\n        (matches(elt, \"form\") && getRawAttribute(elt, 'enctype') === \"multipart/form-data\");\n}\n\nfunction encodeParamsForBody(xhr, elt, filteredParameters) {\n    var encodedParameters = null;\n    withExtensions(elt, function (extension) {\n        if (encodedParameters == null) {\n            encodedParameters = extension.encodeParameters(xhr, filteredParameters, elt);\n        }\n    });\n    if (encodedParameters != null) {\n        return encodedParameters;\n    } else {\n        if (usesFormData(elt)) {\n            return makeFormData(filteredParameters);\n        } else {\n            return urlEncode(filteredParameters);\n        }\n    }\n}\n\n/**\n *\n * @param {Element} target\n * @returns {import(\"./htmx\").HtmxSettleInfo}\n */\nfunction makeSettleInfo(target) {\n    return {tasks: [], elts: [target]};\n}\n\nfunction updateScrollState(content, swapSpec) {\n    var first = content[0];\n    var last = content[content.length - 1];\n    if (swapSpec.scroll) {\n        var target = null;\n        if (swapSpec.scrollTarget) {\n            target = querySelectorExt(first, swapSpec.scrollTarget);\n        }\n        if (swapSpec.scroll === \"top\" && (first || target)) {\n            target = target || first;\n            target.scrollTop = 0;\n        }\n        if (swapSpec.scroll === \"bottom\" && (last || target)) {\n            target = target || last;\n            target.scrollTop = target.scrollHeight;\n        }\n    }\n    if (swapSpec.show) {\n        var target = null;\n        if (swapSpec.showTarget) {\n            var targetStr = swapSpec.showTarget;\n            if (swapSpec.showTarget === \"window\") {\n                targetStr = \"body\";\n            }\n            target = querySelectorExt(first, targetStr);\n        }\n        if (swapSpec.show === \"top\" && (first || target)) {\n            target = target || first;\n            target.scrollIntoView({block:'start', behavior: htmx.config.scrollBehavior});\n        }\n        if (swapSpec.show === \"bottom\" && (last || target)) {\n            target = target || last;\n            target.scrollIntoView({block:'end', behavior: htmx.config.scrollBehavior});\n        }\n    }\n}\n\n/**\n * @param {HTMLElement} elt\n * @param {string} attr\n * @param {boolean=} evalAsDefault\n * @param {Object=} values\n * @returns {Object}\n */\nfunction getValuesForElement(elt, attr, evalAsDefault, values) {\n    if (values == null) {\n        values = {};\n    }\n    if (elt == null) {\n        return values;\n    }\n    var attributeValue = getAttributeValue(elt, attr);\n    if (attributeValue) {\n        var str = attributeValue.trim();\n        var evaluateValue = evalAsDefault;\n        if (str === \"unset\") {\n            return null;\n        }\n        if (str.indexOf(\"javascript:\") === 0) {\n            str = str.substr(11);\n            evaluateValue = true;\n        } else if (str.indexOf(\"js:\") === 0) {\n            str = str.substr(3);\n            evaluateValue = true;\n        }\n        if (str.indexOf('{') !== 0) {\n            str = \"{\" + str + \"}\";\n        }\n        var varsValues;\n        if (evaluateValue) {\n            varsValues = maybeEval(elt,function () {return Function(\"return (\" + str + \")\")();}, {});\n        } else {\n            varsValues = parseJSON(str);\n        }\n        for (var key in varsValues) {\n            if (varsValues.hasOwnProperty(key)) {\n                if (values[key] == null) {\n                    values[key] = varsValues[key];\n                }\n            }\n        }\n    }\n    return getValuesForElement(parentElt(elt), attr, evalAsDefault, values);\n}\n\nfunction maybeEval(elt, toEval, defaultVal) {\n    if (htmx.config.allowEval) {\n        return toEval();\n    } else {\n        triggerErrorEvent(elt, 'htmx:evalDisallowedError');\n        return defaultVal;\n    }\n}\n\n/**\n * @param {HTMLElement} elt\n * @param {*} expressionVars\n * @returns\n */\nfunction getHXVarsForElement(elt, expressionVars) {\n    return getValuesForElement(elt, \"hx-vars\", true, expressionVars);\n}\n\n/**\n * @param {HTMLElement} elt\n * @param {*} expressionVars\n * @returns\n */\nfunction getHXValsForElement(elt, expressionVars) {\n    return getValuesForElement(elt, \"hx-vals\", false, expressionVars);\n}\n\n/**\n * @param {HTMLElement} elt\n * @returns {Object}\n */\nfunction getExpressionVars(elt) {\n    return mergeObjects(getHXVarsForElement(elt), getHXValsForElement(elt));\n}\n\nfunction safelySetHeaderValue(xhr, header, headerValue) {\n    if (headerValue !== null) {\n        try {\n            xhr.setRequestHeader(header, headerValue);\n        } catch (e) {\n            // On an exception, try to set the header URI encoded instead\n            xhr.setRequestHeader(header, encodeURIComponent(headerValue));\n            xhr.setRequestHeader(header + \"-URI-AutoEncoded\", \"true\");\n        }\n    }\n}\n\nfunction getPathFromResponse(xhr) {\n    // NB: IE11 does not support this stuff\n    if (xhr.responseURL && typeof(URL) !== \"undefined\") {\n        try {\n            var url = new URL(xhr.responseURL);\n            return url.pathname + url.search;\n        } catch (e) {\n            triggerErrorEvent(getDocument().body, \"htmx:badResponseUrl\", {url: xhr.responseURL});\n        }\n    }\n}\n\nfunction hasHeader(xhr, regexp) {\n    return xhr.getAllResponseHeaders().match(regexp);\n}\n\nfunction ajaxHelper(verb, path, context) {\n    verb = verb.toLowerCase();\n    if (context) {\n        if (context instanceof Element || isType(context, 'String')) {\n            return issueAjaxRequest(verb, path, null, null, {\n                targetOverride: resolveTarget(context),\n                returnPromise: true\n            });\n        } else {\n            return issueAjaxRequest(verb, path, resolveTarget(context.source), context.event,\n                {\n                    handler : context.handler,\n                    headers : context.headers,\n                    values : context.values,\n                    targetOverride: resolveTarget(context.target),\n                    swapOverride: context.swap,\n                    returnPromise: true\n                });\n        }\n    } else {\n        return issueAjaxRequest(verb, path, null, null, {\n                returnPromise: true\n        });\n    }\n}\n\nfunction hierarchyForElt(elt) {\n    var arr = [];\n    while (elt) {\n        arr.push(elt);\n        elt = elt.parentElement;\n    }\n    return arr;\n}\n\nfunction issueAjaxRequest(verb, path, elt, event, etc, confirmed) {\n    var resolve = null;\n    var reject = null;\n    etc = etc != null ? etc : {};\n    if(etc.returnPromise && typeof Promise !== \"undefined\"){\n        var promise = new Promise(function (_resolve, _reject) {\n            resolve = _resolve;\n            reject = _reject;\n        });\n    }\n    if(elt == null) {\n        elt = getDocument().body;\n    }\n    var responseHandler = etc.handler || handleAjaxResponse;\n\n    if (!bodyContains(elt)) {\n        return; // do not issue requests for elements removed from the DOM\n    }\n    var target = etc.targetOverride || getTarget(elt);\n    if (target == null || target == DUMMY_ELT) {\n        triggerErrorEvent(elt, 'htmx:targetError', {target: getAttributeValue(elt, \"hx-target\")});\n        return;\n    }\n\n    // allow event-based confirmation w/ a callback\n    if (!confirmed) {\n        var issueRequest = function() {\n            return issueAjaxRequest(verb, path, elt, event, etc, true);\n        }\n        var confirmDetails = {target: target, elt: elt, path: path, verb: verb, triggeringEvent: event, etc: etc, issueRequest: issueRequest};\n        if (triggerEvent(elt, 'htmx:confirm', confirmDetails) === false) {\n            return;\n        }\n    }\n\n    var syncElt = elt;\n    var eltData = getInternalData(elt);\n    var syncStrategy = getClosestAttributeValue(elt, \"hx-sync\");\n    var queueStrategy = null;\n    var abortable = false;\n    if (syncStrategy) {\n        var syncStrings = syncStrategy.split(\":\");\n        var selector = syncStrings[0].trim();\n        if (selector === \"this\") {\n            syncElt = findThisElement(elt, 'hx-sync');\n        } else {\n            syncElt = querySelectorExt(elt, selector);\n        }\n        // default to the drop strategy\n        syncStrategy = (syncStrings[1] || 'drop').trim();\n        eltData = getInternalData(syncElt);\n        if (syncStrategy === \"drop\" && eltData.xhr && eltData.abortable !== true) {\n            return;\n        } else if (syncStrategy === \"abort\") {\n            if (eltData.xhr) {\n                return;\n            } else {\n                abortable = true;\n            }\n        } else if (syncStrategy === \"replace\") {\n            triggerEvent(syncElt, 'htmx:abort'); // abort the current request and continue\n        } else if (syncStrategy.indexOf(\"queue\") === 0) {\n            var queueStrArray = syncStrategy.split(\" \");\n            queueStrategy = (queueStrArray[1] || \"last\").trim();\n        }\n    }\n\n    if (eltData.xhr) {\n        if (eltData.abortable) {\n            triggerEvent(syncElt, 'htmx:abort'); // abort the current request and continue\n        } else {\n            if(queueStrategy == null){\n                if (event) {\n                    var eventData = getInternalData(event);\n                    if (eventData && eventData.triggerSpec && eventData.triggerSpec.queue) {\n                        queueStrategy = eventData.triggerSpec.queue;\n                    }\n                }\n                if (queueStrategy == null) {\n                    queueStrategy = \"last\";\n                }\n            }\n            if (eltData.queuedRequests == null) {\n                eltData.queuedRequests = [];\n            }\n            if (queueStrategy === \"first\" && eltData.queuedRequests.length === 0) {\n                eltData.queuedRequests.push(function () {\n                    issueAjaxRequest(verb, path, elt, event, etc)\n                });\n            } else if (queueStrategy === \"all\") {\n                eltData.queuedRequests.push(function () {\n                    issueAjaxRequest(verb, path, elt, event, etc)\n                });\n            } else if (queueStrategy === \"last\") {\n                eltData.queuedRequests = []; // dump existing queue\n                eltData.queuedRequests.push(function () {\n                    issueAjaxRequest(verb, path, elt, event, etc)\n                });\n            }\n            return;\n        }\n    }\n\n    var xhr = new XMLHttpRequest();\n    eltData.xhr = xhr;\n    eltData.abortable = abortable;\n    var endRequestLock = function(){\n        eltData.xhr = null;\n        eltData.abortable = false;\n        if (eltData.queuedRequests != null &&\n            eltData.queuedRequests.length > 0) {\n            var queuedRequest = eltData.queuedRequests.shift();\n            queuedRequest();\n        }\n    }\n    var promptQuestion = getClosestAttributeValue(elt, \"hx-prompt\");\n    if (promptQuestion) {\n        var promptResponse = prompt(promptQuestion);\n        // prompt returns null if cancelled and empty string if accepted with no entry\n        if (promptResponse === null ||\n            !triggerEvent(elt, 'htmx:prompt', {prompt: promptResponse, target:target})) {\n            maybeCall(resolve);\n            endRequestLock();\n            return promise;\n        }\n    }\n\n    var confirmQuestion = getClosestAttributeValue(elt, \"hx-confirm\");\n    if (confirmQuestion) {\n        if(!confirm(confirmQuestion)) {\n            maybeCall(resolve);\n            endRequestLock()\n            return promise;\n        }\n    }\n\n\n    var headers = getHeaders(elt, target, promptResponse);\n    if (etc.headers) {\n        headers = mergeObjects(headers, etc.headers);\n    }\n    var results = getInputValues(elt, verb);\n    var errors = results.errors;\n    var rawParameters = results.values;\n    if (etc.values) {\n        rawParameters = mergeObjects(rawParameters, etc.values);\n    }\n    var expressionVars = getExpressionVars(elt);\n    var allParameters = mergeObjects(rawParameters, expressionVars);\n    var filteredParameters = filterValues(allParameters, elt);\n\n    if (verb !== 'get' && !usesFormData(elt)) {\n        headers['Content-Type'] = 'application/x-www-form-urlencoded';\n    }\n\n    if (htmx.config.getCacheBusterParam && verb === 'get') {\n        filteredParameters['org.htmx.cache-buster'] = getRawAttribute(target, \"id\") || \"true\";\n    }\n\n    // behavior of anchors w/ empty href is to use the current URL\n    if (path == null || path === \"\") {\n        path = getDocument().location.href;\n    }\n\n\n    var requestAttrValues = getValuesForElement(elt, 'hx-request');\n\n    var eltIsBoosted = getInternalData(elt).boosted;\n    var requestConfig = {\n        boosted: eltIsBoosted,\n        parameters: filteredParameters,\n        unfilteredParameters: allParameters,\n        headers:headers,\n        target:target,\n        verb:verb,\n        errors:errors,\n        withCredentials: etc.credentials || requestAttrValues.credentials || htmx.config.withCredentials,\n        timeout:  etc.timeout || requestAttrValues.timeout || htmx.config.timeout,\n        path:path,\n        triggeringEvent:event\n    };\n\n    if(!triggerEvent(elt, 'htmx:configRequest', requestConfig)){\n        maybeCall(resolve);\n        endRequestLock();\n        return promise;\n    }\n\n    // copy out in case the object was overwritten\n    path = requestConfig.path;\n    verb = requestConfig.verb;\n    headers = requestConfig.headers;\n    filteredParameters = requestConfig.parameters;\n    errors = requestConfig.errors;\n\n    if(errors && errors.length > 0){\n        triggerEvent(elt, 'htmx:validation:halted', requestConfig)\n        maybeCall(resolve);\n        endRequestLock();\n        return promise;\n    }\n\n    var splitPath = path.split(\"#\");\n    var pathNoAnchor = splitPath[0];\n    var anchor = splitPath[1];\n    var finalPathForGet = null;\n    if (verb === 'get') {\n        finalPathForGet = pathNoAnchor;\n        var values = Object.keys(filteredParameters).length !== 0;\n        if (values) {\n            if (finalPathForGet.indexOf(\"?\") < 0) {\n                finalPathForGet += \"?\";\n            } else {\n                finalPathForGet += \"&\";\n            }\n            finalPathForGet += urlEncode(filteredParameters);\n            if (anchor) {\n                finalPathForGet += \"#\" + anchor;\n            }\n        }\n        xhr.open('GET', finalPathForGet, true);\n    } else {\n        xhr.open(verb.toUpperCase(), path, true);\n    }\n\n    xhr.overrideMimeType(\"text/html\");\n    xhr.withCredentials = requestConfig.withCredentials;\n    xhr.timeout = requestConfig.timeout;\n\n    // request headers\n    if (requestAttrValues.noHeaders) {\n        // ignore all headers\n    } else {\n        for (var header in headers) {\n            if (headers.hasOwnProperty(header)) {\n                var headerValue = headers[header];\n                safelySetHeaderValue(xhr, header, headerValue);\n            }\n        }\n    }\n\n    var responseInfo = {\n        xhr: xhr, target: target, requestConfig: requestConfig, etc: etc, boosted: eltIsBoosted,\n        pathInfo: {\n            requestPath: path,\n            finalRequestPath: finalPathForGet || path,\n            anchor: anchor\n        }\n    };\n\n    xhr.onload = function () {\n        try {\n            var hierarchy = hierarchyForElt(elt);\n            responseInfo.pathInfo.responsePath = getPathFromResponse(xhr);\n            responseHandler(elt, responseInfo);\n            removeRequestIndicatorClasses(indicators);\n            triggerEvent(elt, 'htmx:afterRequest', responseInfo);\n            triggerEvent(elt, 'htmx:afterOnLoad', responseInfo);\n            // if the body no longer contains the element, trigger the even on the closest parent\n            // remaining in the DOM\n            if (!bodyContains(elt)) {\n                var secondaryTriggerElt = null;\n                while (hierarchy.length > 0 && secondaryTriggerElt == null) {\n                    var parentEltInHierarchy = hierarchy.shift();\n                    if (bodyContains(parentEltInHierarchy)) {\n                        secondaryTriggerElt = parentEltInHierarchy;\n                    }\n                }\n                if (secondaryTriggerElt) {\n                    triggerEvent(secondaryTriggerElt, 'htmx:afterRequest', responseInfo);\n                    triggerEvent(secondaryTriggerElt, 'htmx:afterOnLoad', responseInfo);\n                }\n            }\n            maybeCall(resolve);\n            endRequestLock();\n        } catch (e) {\n            triggerErrorEvent(elt, 'htmx:onLoadError', mergeObjects({error:e}, responseInfo));\n            throw e;\n        }\n    }\n    xhr.onerror = function () {\n        removeRequestIndicatorClasses(indicators);\n        triggerErrorEvent(elt, 'htmx:afterRequest', responseInfo);\n        triggerErrorEvent(elt, 'htmx:sendError', responseInfo);\n        maybeCall(reject);\n        endRequestLock();\n    }\n    xhr.onabort = function() {\n        removeRequestIndicatorClasses(indicators);\n        triggerErrorEvent(elt, 'htmx:afterRequest', responseInfo);\n        triggerErrorEvent(elt, 'htmx:sendAbort', responseInfo);\n        maybeCall(reject);\n        endRequestLock();\n    }\n    xhr.ontimeout = function() {\n        removeRequestIndicatorClasses(indicators);\n        triggerErrorEvent(elt, 'htmx:afterRequest', responseInfo);\n        triggerErrorEvent(elt, 'htmx:timeout', responseInfo);\n        maybeCall(reject);\n        endRequestLock();\n    }\n    if(!triggerEvent(elt, 'htmx:beforeRequest', responseInfo)){\n        maybeCall(resolve);\n        endRequestLock()\n        return promise\n    }\n    var indicators = addRequestIndicatorClasses(elt);\n\n    forEach(['loadstart', 'loadend', 'progress', 'abort'], function(eventName) {\n        forEach([xhr, xhr.upload], function (target) {\n            target.addEventListener(eventName, function(event){\n                triggerEvent(elt, \"htmx:xhr:\" + eventName, {\n                    lengthComputable:event.lengthComputable,\n                    loaded:event.loaded,\n                    total:event.total\n                });\n            })\n        });\n    });\n    triggerEvent(elt, 'htmx:beforeSend', responseInfo);\n    xhr.send(verb === 'get' ? null : encodeParamsForBody(xhr, elt, filteredParameters));\n    return promise;\n}\n\nfunction determineHistoryUpdates(elt, responseInfo) {\n\n    var xhr = responseInfo.xhr;\n\n    //===========================================\n    // First consult response headers\n    //===========================================\n    var pathFromHeaders = null;\n    var typeFromHeaders = null;\n    if (hasHeader(xhr,/HX-Push:/i)) {\n        pathFromHeaders = xhr.getResponseHeader(\"HX-Push\");\n        typeFromHeaders = \"push\";\n    } else if (hasHeader(xhr,/HX-Push-Url:/i)) {\n        pathFromHeaders = xhr.getResponseHeader(\"HX-Push-Url\");\n        typeFromHeaders = \"push\";\n    } else if (hasHeader(xhr,/HX-Replace-Url:/i)) {\n        pathFromHeaders = xhr.getResponseHeader(\"HX-Replace-Url\");\n        typeFromHeaders = \"replace\";\n    }\n\n    // if there was a response header, that has priority\n    if (pathFromHeaders) {\n        if (pathFromHeaders === \"false\") {\n            return {}\n        } else {\n            return {\n                type: typeFromHeaders,\n                path : pathFromHeaders\n            }\n        }\n    }\n\n    //===========================================\n    // Next resolve via DOM values\n    //===========================================\n    var requestPath =  responseInfo.pathInfo.finalRequestPath;\n    var responsePath =  responseInfo.pathInfo.responsePath;\n\n    var pushUrl = getClosestAttributeValue(elt, \"hx-push-url\");\n    var replaceUrl = getClosestAttributeValue(elt, \"hx-replace-url\");\n    var elementIsBoosted = getInternalData(elt).boosted;\n\n    var saveType = null;\n    var path = null;\n\n    if (pushUrl) {\n        saveType = \"push\";\n        path = pushUrl;\n    } else if (replaceUrl) {\n        saveType = \"replace\";\n        path = replaceUrl;\n    } else if (elementIsBoosted) {\n        saveType = \"push\";\n        path = responsePath || requestPath; // if there is no response path, go with the original request path\n    }\n\n    if (path) {\n        // false indicates no push, return empty object\n        if (path === \"false\") {\n            return {};\n        }\n\n        // true indicates we want to follow wherever the server ended up sending us\n        if (path === \"true\") {\n            path = responsePath || requestPath; // if there is no response path, go with the original request path\n        }\n\n        // restore any anchor associated with the request\n        if (responseInfo.pathInfo.anchor &&\n            path.indexOf(\"#\") === -1) {\n            path = path + \"#\" + responseInfo.pathInfo.anchor;\n        }\n\n        return {\n            type:saveType,\n            path: path\n        }\n    } else {\n        return {};\n    }\n}\n\nfunction handleAjaxResponse(elt, responseInfo) {\n    var xhr = responseInfo.xhr;\n    var target = responseInfo.target;\n    var etc = responseInfo.etc;\n\n    if (!triggerEvent(elt, 'htmx:beforeOnLoad', responseInfo)) return;\n\n    if (hasHeader(xhr, /HX-Trigger:/i)) {\n        handleTrigger(xhr, \"HX-Trigger\", elt);\n    }\n\n    if (hasHeader(xhr, /HX-Location:/i)) {\n        saveCurrentPageToHistory();\n        var redirectPath = xhr.getResponseHeader(\"HX-Location\");\n        var swapSpec;\n        if (redirectPath.indexOf(\"{\") === 0) {\n            swapSpec = parseJSON(redirectPath);\n            // what's the best way to throw an error if the user didn't include this\n            redirectPath = swapSpec['path'];\n            delete swapSpec['path'];\n        }\n        ajaxHelper('GET', redirectPath, swapSpec).then(function(){\n            pushUrlIntoHistory(redirectPath);\n        });\n        return;\n    }\n\n    if (hasHeader(xhr, /HX-Redirect:/i)) {\n        location.href = xhr.getResponseHeader(\"HX-Redirect\");\n        return;\n    }\n\n    if (hasHeader(xhr,/HX-Refresh:/i)) {\n        if (\"true\" === xhr.getResponseHeader(\"HX-Refresh\")) {\n            location.reload();\n            return;\n        }\n    }\n\n    if (hasHeader(xhr,/HX-Retarget:/i)) {\n        responseInfo.target = getDocument().querySelector(xhr.getResponseHeader(\"HX-Retarget\"));\n    }\n\n    var historyUpdate = determineHistoryUpdates(elt, responseInfo);\n\n    // by default htmx only swaps on 200 return codes and does not swap\n    // on 204 'No Content'\n    // this can be ovverriden by responding to the htmx:beforeSwap event and\n    // overriding the detail.shouldSwap property\n    var shouldSwap = xhr.status >= 200 && xhr.status < 400 && xhr.status !== 204;\n    var serverResponse = xhr.response;\n    var isError = xhr.status >= 400;\n    var beforeSwapDetails = mergeObjects({shouldSwap: shouldSwap, serverResponse:serverResponse, isError:isError}, responseInfo);\n    if (!triggerEvent(target, 'htmx:beforeSwap', beforeSwapDetails)) return;\n\n    target = beforeSwapDetails.target; // allow re-targeting\n    serverResponse = beforeSwapDetails.serverResponse; // allow updating content\n    isError = beforeSwapDetails.isError; // allow updating error\n\n    responseInfo.failed = isError; // Make failed property available to response events\n    responseInfo.successful = !isError; // Make successful property available to response events\n\n    if (beforeSwapDetails.shouldSwap) {\n        if (xhr.status === 286) {\n            cancelPolling(elt);\n        }\n\n        withExtensions(elt, function (extension) {\n            serverResponse = extension.transformResponse(serverResponse, xhr, elt);\n        });\n\n        // Save current page if there will be a history update\n        if (historyUpdate.type) {\n            saveCurrentPageToHistory();\n        }\n\n        var swapOverride = etc.swapOverride;\n        if (hasHeader(xhr,/HX-Reswap:/i)) {\n            swapOverride = xhr.getResponseHeader(\"HX-Reswap\");\n        }\n        var swapSpec = getSwapSpecification(elt, swapOverride);\n\n        target.classList.add(htmx.config.swappingClass);\n        var doSwap = function () {\n            try {\n\n                var activeElt = document.activeElement;\n                var selectionInfo = {};\n                try {\n                    selectionInfo = {\n                        elt: activeElt,\n                        // @ts-ignore\n                        start: activeElt ? activeElt.selectionStart : null,\n                        // @ts-ignore\n                        end: activeElt ? activeElt.selectionEnd : null\n                    };\n                } catch (e) {\n                    // safari issue - see https://github.com/microsoft/playwright/issues/5894\n                }\n\n                var settleInfo = makeSettleInfo(target);\n                selectAndSwap(swapSpec.swapStyle, target, elt, serverResponse, settleInfo);\n\n                if (selectionInfo.elt &&\n                    !bodyContains(selectionInfo.elt) &&\n                    selectionInfo.elt.id) {\n                    var newActiveElt = document.getElementById(selectionInfo.elt.id);\n                    var focusOptions = { preventScroll: swapSpec.focusScroll !== undefined ? !swapSpec.focusScroll : !htmx.config.defaultFocusScroll };\n                    if (newActiveElt) {\n                        // @ts-ignore\n                        if (selectionInfo.start && newActiveElt.setSelectionRange) {\n                            // @ts-ignore\n                            try {\n                                newActiveElt.setSelectionRange(selectionInfo.start, selectionInfo.end);\n                            } catch (e) {\n                                // the setSelectionRange method is present on fields that don't support it, so just let this fail\n                            }\n                        }\n                        newActiveElt.focus(focusOptions);\n                    }\n                }\n\n                target.classList.remove(htmx.config.swappingClass);\n                forEach(settleInfo.elts, function (elt) {\n                    if (elt.classList) {\n                        elt.classList.add(htmx.config.settlingClass);\n                    }\n                    triggerEvent(elt, 'htmx:afterSwap', responseInfo);\n                });\n\n                if (hasHeader(xhr, /HX-Trigger-After-Swap:/i)) {\n                    var finalElt = elt;\n                    if (!bodyContains(elt)) {\n                        finalElt = getDocument().body;\n                    }\n                    handleTrigger(xhr, \"HX-Trigger-After-Swap\", finalElt);\n                }\n\n                var doSettle = function () {\n                    forEach(settleInfo.tasks, function (task) {\n                        task.call();\n                    });\n                    forEach(settleInfo.elts, function (elt) {\n                        if (elt.classList) {\n                            elt.classList.remove(htmx.config.settlingClass);\n                        }\n                        triggerEvent(elt, 'htmx:afterSettle', responseInfo);\n                    });\n\n                    // if we need to save history, do so\n                    if (historyUpdate.type) {\n                        if (historyUpdate.type === \"push\") {\n                            pushUrlIntoHistory(historyUpdate.path);\n                            triggerEvent(getDocument().body, 'htmx:pushedIntoHistory', {path: historyUpdate.path});\n                        } else {\n                            replaceUrlInHistory(historyUpdate.path);\n                            triggerEvent(getDocument().body, 'htmx:replacedInHistory', {path: historyUpdate.path});\n                        }\n                    }\n                    if (responseInfo.pathInfo.anchor) {\n                        var anchorTarget = find(\"#\" + responseInfo.pathInfo.anchor);\n                        if(anchorTarget) {\n                            anchorTarget.scrollIntoView({block:'start', behavior: \"auto\"});\n                        }\n                    }\n\n                    if(settleInfo.title) {\n                        var titleElt = find(\"title\");\n                        if(titleElt) {\n                            titleElt.innerHTML = settleInfo.title;\n                        } else {\n                            window.document.title = settleInfo.title;\n                        }\n                    }\n\n                    updateScrollState(settleInfo.elts, swapSpec);\n\n                    if (hasHeader(xhr, /HX-Trigger-After-Settle:/i)) {\n                        var finalElt = elt;\n                        if (!bodyContains(elt)) {\n                            finalElt = getDocument().body;\n                        }\n                        handleTrigger(xhr, \"HX-Trigger-After-Settle\", finalElt);\n                    }\n                }\n\n                if (swapSpec.settleDelay > 0) {\n                    setTimeout(doSettle, swapSpec.settleDelay)\n                } else {\n                    doSettle();\n                }\n            } catch (e) {\n                triggerErrorEvent(elt, 'htmx:swapError', responseInfo);\n                throw e;\n            }\n        };\n\n        if (swapSpec.swapDelay > 0) {\n            setTimeout(doSwap, swapSpec.swapDelay)\n        } else {\n            doSwap();\n        }\n    }\n    if (isError) {\n        triggerErrorEvent(elt, 'htmx:responseError', mergeObjects({error: \"Response Status Error Code \" + xhr.status + \" from \" + responseInfo.pathInfo.requestPath}, responseInfo));\n    }\n}\n\n//====================================================================\n// Extensions API\n//====================================================================\n\n/** @type {Object<string, import(\"./htmx\").HtmxExtension>} */\nvar extensions = {};\n\n/**\n * extensionBase defines the default functions for all extensions.\n * @returns {import(\"./htmx\").HtmxExtension}\n */\nfunction extensionBase() {\n    return {\n        init: function(api) {return null;},\n        onEvent : function(name, evt) {return true;},\n        transformResponse : function(text, xhr, elt) {return text;},\n        isInlineSwap : function(swapStyle) {return false;},\n        handleSwap : function(swapStyle, target, fragment, settleInfo) {return false;},\n        encodeParameters : function(xhr, parameters, elt) {return null;}\n    }\n}\n\n/**\n * defineExtension initializes the extension and adds it to the htmx registry\n *\n * @param {string} name\n * @param {import(\"./htmx\").HtmxExtension} extension\n */\nfunction defineExtension(name, extension) {\n    if(extension.init) {\n        extension.init(internalAPI)\n    }\n    extensions[name] = mergeObjects(extensionBase(), extension);\n}\n\n/**\n * removeExtension removes an extension from the htmx registry\n *\n * @param {string} name\n */\nfunction removeExtension(name) {\n    delete extensions[name];\n}\n\n/**\n * getExtensions searches up the DOM tree to return all extensions that can be applied to a given element\n *\n * @param {HTMLElement} elt\n * @param {import(\"./htmx\").HtmxExtension[]=} extensionsToReturn\n * @param {import(\"./htmx\").HtmxExtension[]=} extensionsToIgnore\n */\n function getExtensions(elt, extensionsToReturn, extensionsToIgnore) {\n\n    if (elt == undefined) {\n        return extensionsToReturn;\n    }\n    if (extensionsToReturn == undefined) {\n        extensionsToReturn = [];\n    }\n    if (extensionsToIgnore == undefined) {\n        extensionsToIgnore = [];\n    }\n    var extensionsForElement = getAttributeValue(elt, \"hx-ext\");\n    if (extensionsForElement) {\n        forEach(extensionsForElement.split(\",\"), function(extensionName){\n            extensionName = extensionName.replace(/ /g, '');\n            if (extensionName.slice(0, 7) == \"ignore:\") {\n                extensionsToIgnore.push(extensionName.slice(7));\n                return;\n            }\n            if (extensionsToIgnore.indexOf(extensionName) < 0) {\n                var extension = extensions[extensionName];\n                if (extension && extensionsToReturn.indexOf(extension) < 0) {\n                    extensionsToReturn.push(extension);\n                }\n            }\n        });\n    }\n    return getExtensions(parentElt(elt), extensionsToReturn, extensionsToIgnore);\n}\n\n//====================================================================\n// Initialization\n//====================================================================\n\nfunction ready(fn) {\n    if (getDocument().readyState !== 'loading') {\n        fn();\n    } else {\n        getDocument().addEventListener('DOMContentLoaded', fn);\n    }\n}\n\nfunction insertIndicatorStyles() {\n    if (htmx.config.includeIndicatorStyles !== false) {\n        getDocument().head.insertAdjacentHTML(\"beforeend\",\n            \"<style>\\\n              .\" + htmx.config.indicatorClass + \"{opacity:0;transition: opacity 200ms ease-in;}\\\n              .\" + htmx.config.requestClass + \" .\" + htmx.config.indicatorClass + \"{opacity:1}\\\n              .\" + htmx.config.requestClass + \".\" + htmx.config.indicatorClass + \"{opacity:1}\\\n            </style>\");\n    }\n}\n\nfunction getMetaConfig() {\n    var element = getDocument().querySelector('meta[name=\"htmx-config\"]');\n    if (element) {\n        // @ts-ignore\n        return parseJSON(element.content);\n    } else {\n        return null;\n    }\n}\n\nfunction mergeMetaConfig() {\n    var metaConfig = getMetaConfig();\n    if (metaConfig) {\n        htmx.config = mergeObjects(htmx.config , metaConfig)\n    }\n}\n\n// initialize the document\nready(function () {\n    mergeMetaConfig();\n    insertIndicatorStyles();\n    var body = getDocument().body;\n    processNode(body);\n    var restoredElts = getDocument().querySelectorAll(\n        \"[hx-trigger='restored'],[data-hx-trigger='restored']\"\n    );\n    body.addEventListener(\"htmx:abort\", function (evt) {\n        var target = evt.target;\n        var internalData = getInternalData(target);\n        if (internalData && internalData.xhr) {\n            internalData.xhr.abort();\n        }\n    });\n    window.onpopstate = function (event) {\n        if (event.state && event.state.htmx) {\n            restoreHistory();\n            forEach(restoredElts, function(elt){\n                triggerEvent(elt, 'htmx:restored', {\n                    'document': getDocument(),\n                    'triggerEvent': triggerEvent\n                });\n            });\n        }\n    };\n    setTimeout(function () {\n        triggerEvent(body, 'htmx:load', {}); // give ready handlers a chance to load up before firing this event\n    }, 0);\n})\n\nexport default htmx;\n"],"names":["htmx","onLoad","onLoadHelper","process","processNode","on","addEventListenerImpl","off","removeEventListenerImpl","trigger","triggerEvent","ajax","ajaxHelper","find","findAll","closest","values","elt","type","getInputValues","remove","removeElement","addClass","addClassToElement","removeClass","removeClassFromElement","toggleClass","toggleClassOnElement","takeClass","takeClassForElement","defineExtension","removeExtension","logAll","logger","config","historyEnabled","historyCacheSize","refreshOnHistoryMiss","defaultSwapStyle","defaultSwapDelay","defaultSettleDelay","includeIndicatorStyles","indicatorClass","requestClass","addedClass","settlingClass","swappingClass","allowEval","inlineScriptNonce","attributesToSettle","withCredentials","timeout","wsReconnectDelay","wsBinaryType","disableSelector","useTemplateFragments","scrollBehavior","defaultFocusScroll","getCacheBusterParam","parseInterval","_","internalEval","createEventSource","url","EventSource","createWebSocket","sock","WebSocket","binaryType","version","internalAPI","addTriggerHandler","bodyContains","canAccessLocalStorage","filterValues","hasAttribute","getAttributeValue","getClosestMatch","getExpressionVars","getHeaders","getInternalData","getSwapSpecification","getTriggerSpecs","getTarget","makeFragment","mergeObjects","makeSettleInfo","oobSwap","selectAndSwap","settleImmediately","shouldCancel","triggerErrorEvent","withExtensions","VERBS","VERB_SELECTOR","map","verb","join","str","undefined","slice","parseFloat","getRawAttribute","name","getAttribute","qualifiedName","parentElt","parentElement","getDocument","document","condition","getAttributeValueWithDisinheritance","initialElement","ancestor","attributeName","attributeValue","disinherit","split","indexOf","getClosestAttributeValue","closestAttr","e","matches","selector","matchesFunction","matchesSelector","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","call","getStartTag","match","exec","toLowerCase","parseHTML","resp","depth","responseNode","DOMParser","parseFromString","body","firstChild","createDocumentFragment","querySelector","content","maybeCall","func","isType","o","Object","prototype","toString","isFunction","isRawObject","dataProp","data","toArray","arr","returnArr","i","length","push","forEach","isScrolledIntoView","el","rect","getBoundingClientRect","elemTop","top","elemBottom","bottom","window","innerHeight","getRootNode","ShadowRoot","contains","host","splitOnWhitespace","trim","obj1","obj2","key","hasOwnProperty","parseJSON","jString","JSON","parse","error","logError","test","localStorage","setItem","removeItem","maybeEval","eval","callback","evt","detail","event","console","log","eltOrSelector","querySelectorAll","delay","resolveTarget","setTimeout","removeChild","clazz","classList","add","removeAttribute","toggle","children","child","querySelectorAllExt","substr","scanForwardQuery","scanBackwardsQuery","start","results","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_FOLLOWING","querySelectorExt","arg2","processEventArgs","arg1","arg3","target","listener","ready","eventArgs","addEventListener","removeEventListener","DUMMY_ELT","createElement","findAttributeTargets","attrName","attrTarget","findThisElement","result","attribute","targetStr","boosted","shouldSettleAttribute","cloneAttributes","mergeTo","mergeFrom","attributes","attr","setAttribute","value","isInlineSwap","swapStyle","extensions","getExtensions","extension","oobValue","oobElement","settleInfo","id","targets","fragment","oobElementClone","cloneNode","appendChild","beforeSwapDetails","shouldSwap","swap","elts","parentNode","handleOutOfBandSwaps","oobSelects","oobSelectValues","oobSelectValue","substring","handlePreservedElements","preservedElt","oldElt","getElementById","replaceChild","handleAttributes","newNode","oldNode","tagName","newAttributes","tasks","makeAjaxLoadTask","processScripts","processFocus","autofocus","autoFocusedElt","focus","insertNodesBefore","insertBefore","childNodes","nodeType","TEXT_NODE","COMMENT_NODE","stringHash","string","hash","char","charCodeAt","attributeHash","deInitNode","element","internalData","webSocket","close","sseEventSource","listenerInfos","info","cleanUpElement","swapOuterHTML","swapInnerHTML","newElt","eltBeforeNewContent","previousSibling","nextSibling","replacedWith","ELEMENT_NODE","nextElementSibling","swapAfterBegin","swapBeforeBegin","swapBeforeEnd","swapAfterEnd","swapDelete","maybeSelectFromResponse","newFragment","node","ext","newElements","handleSwap","j","findTitle","replace","responseText","title","handleTrigger","xhr","header","triggerBody","getResponseHeader","triggers","eventName","WHITESPACE_OR_COMMA","SYMBOL_START","SYMBOL_CONT","STRINGISH_START","NOT_WHITESPACE","tokenizeString","tokens","position","charAt","startPosition","startChar","symbol","isPossibleRelativeReference","token","last","paramName","maybeGenerateConditional","shift","bracketCount","conditionalSource","conditionFunction","Function","source","consumeUntil","INPUT_SELECTOR","explicitTrigger","triggerSpecs","initialLength","every","pollInterval","eventFilter","sseEvent","triggerSpec","changed","once","consume","from_arg","from","throttle","queue","cancelPolling","cancelled","processPolling","handler","spec","nodeData","maybeFilterEvent","makeEvent","isLocalLink","location","hostname","boostElement","path","rawAttribute","issueAjaxRequest","href","ignoreBoostedAnchorCtrlClick","ctrlKey","metaKey","explicitCancel","eltToListenOn","eventListener","preventDefault","eventData","handledFor","elementData","stopPropagation","triggeredOnce","lastValue","delayed","clearTimeout","windowIsScrolling","scrollHandler","initScrollHandler","setInterval","maybeReveal","initHash","processWebSocketInfo","ensureWebSocket","processWebSocketSend","wssSource","retryCount","base_part","port","protocol","socket","onerror","maybeCloseWebSocketSource","onclose","code","getWebSocketReconnectDelay","onopen","response","transformResponse","webSocketSourceElt","parent","headers","errors","filteredParameters","send","stringify","exp","Math","min","pow","random","processSSEInfo","processSSESource","processSSESwap","sseSrc","maybeCloseSSESource","sseEventName","sseSourceElt","hasEventSource","sseListener","swapSpec","processSSETrigger","loadImmediately","load","loaded","processVerbs","explicitAction","observerOptions","root","threshold","IntersectionObserver","entries","isIntersecting","observe","polling","evalScript","script","newScript","textContent","async","nonce","hasChanceOfBeingBoosted","findElementsToProcess","boostedElts","initButtonTracking","form","maybeSetLastButtonClicked","lastButtonClicked","initNode","sseInfo","wsInfo","kebabEventName","CustomEvent","bubbles","cancelable","createEvent","initCustomEvent","ignoreEventForLogging","toDo","msg","errorInfo","eventResult","dispatchEvent","kebabName","kebabedEvent","onEvent","currentPathForHistory","pathname","search","getHistoryElement","saveToHistoryCache","scroll","historyCache","getItem","splice","newHistoryItem","item","cache","cause","getCachedHistory","cleanInnerHtmlForHistory","className","clone","innerHTML","saveCurrentPageToHistory","historyElt","scrollY","history","replaceState","pushUrlIntoHistory","endsWith","pushState","replaceUrlInHistory","task","loadHistoryFromServer","request","XMLHttpRequest","details","open","setRequestHeader","onload","this","status","historyElement","titleElt","cacheMiss","serverResponse","restoreHistory","cached","scrollTo","reload","addRequestIndicatorClasses","indicators","ic","requestCount","removeRequestIndicatorClasses","haveSeenNode","processed","isSameNode","shouldInclude","disabled","checked","processInputValue","validate","multiple","files","current","Array","isArray","concat","validateElement","elements","input","willValidate","checkValidity","message","validationMessage","validity","formValues","noValidate","formNoValidate","descendant","appendParam","returnStr","realValue","String","s","encodeURIComponent","urlEncode","v","makeFormData","formData","FormData","append","prompt","getValuesForElement","inputValues","paramsValue","newValues","isAnchorLink","swapInfoOverride","swapInfo","swapDelay","settleDelay","modifier","scrollVal","splitSpec","pop","selectorVal","showVal","focusScrollVal","usesFormData","encodeParamsForBody","encodedParameters","encodeParameters","updateScrollState","first","scrollTarget","scrollTop","scrollHeight","show","showTarget","scrollIntoView","block","behavior","evalAsDefault","varsValues","evaluateValue","toEval","defaultVal","getHXVarsForElement","expressionVars","getHXValsForElement","safelySetHeaderValue","headerValue","getPathFromResponse","responseURL","URL","hasHeader","regexp","getAllResponseHeaders","context","Element","targetOverride","returnPromise","swapOverride","hierarchyForElt","etc","confirmed","resolve","reject","Promise","promise","_resolve","_reject","responseHandler","handleAjaxResponse","triggeringEvent","issueRequest","syncElt","eltData","syncStrategy","queueStrategy","abortable","syncStrings","queuedRequests","endRequestLock","queuedRequest","promptQuestion","promptResponse","confirmQuestion","confirm","rawParameters","allParameters","requestAttrValues","eltIsBoosted","requestConfig","parameters","unfilteredParameters","credentials","splitPath","pathNoAnchor","anchor","finalPathForGet","keys","toUpperCase","overrideMimeType","noHeaders","responseInfo","pathInfo","requestPath","finalRequestPath","hierarchy","responsePath","secondaryTriggerElt","parentEltInHierarchy","onabort","ontimeout","upload","lengthComputable","total","determineHistoryUpdates","pathFromHeaders","typeFromHeaders","pushUrl","replaceUrl","elementIsBoosted","saveType","redirectPath","then","historyUpdate","isError","failed","successful","doSwap","activeElt","activeElement","selectionInfo","selectionStart","end","selectionEnd","newActiveElt","focusOptions","preventScroll","focusScroll","setSelectionRange","finalElt","doSettle","anchorTarget","extensionBase","init","api","text","extensionsToReturn","extensionsToIgnore","extensionsForElement","extensionName","fn","readyState","insertIndicatorStyles","head","insertAdjacentHTML","getMetaConfig","mergeMetaConfig","metaConfig","restoredElts","abort","onpopstate","state"],"mappings":"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"}